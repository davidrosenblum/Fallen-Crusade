{"version":3,"sources":["img/player_skins/skin1.png","img/silver.png","img/misc/missing.png","img/red.png","img/npcs/commander.png","img/npcs/paragon.png","img/npcs/templar.png","img/environment/grass.png","img/environment/stonewall.png","img/blue.png","components/Banner.jsx","game/Comm.js","game/Client.js","components/Footer.jsx","dispatchers/ModalDispatcher.js","dispatchers/NavDispatcher.js","components/Login.jsx","data/Data.js","utils/Ajax.js","components/Register.jsx","data/GameObjects.js","data/MapObjects.js","data/TransportObjects.js","game/Game.js","components/CharacterSelect.jsx","components/CharacterCreate.jsx","components/GameViewChat.jsx","components/GameViewTarget.jsx","components/GameViewPlayer.jsx","data/AbilityIcons.js","components/GameViewAbilities.jsx","components/GameViewDropdown.jsx","components/InstanceModal.jsx","components/UpgradesModal.jsx","components/GameView.jsx","components/AlertModal.jsx","components/App.jsx","index.js"],"names":["module","exports","__webpack_require__","p","Banner","_React$Component","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","apply","arguments","inherits","createClass","key","value","react_default","a","createElement","className","src","title","alt","React","Component","OpCode","Status","game_Client","Client","_this","call","socket","clientID","accessLevel","_this2","isConnected","url","window","location","origin","replace","WebSocket","addEventListener","emit","err","evt","handleData","data","toString","_this3","split","forEach","msg","opCode","status","json","JSON","parse","console","log","processResponse","handleLogin","handleLogout","handleCharacterList","handleCharacterCreate","handleMapEnter","handleInstanceEnter","handleChatMessage","handleObjectCreate","handleObjectDelete","handleObjectUpdate","handleObjectStats","handleAbilityList","handleAbilityUpgrade","handleAbilityCast","handleCreateInstance","handleMapPlayers","handleAvailablePlayers","handleAbilityReady","_data$message","message","_data$clientID","_data$accessLevel","_data$message2","_data$message3","_data$characterList","characterList","_data$message4","_data$message5","_data$mapState","mapState","_data$message6","_data$mapState2","_data$chat","chat","_data$from","from","_data$spawnState","spawnState","_data$objectID","objectID","_data$updateState","updateState","_data$message7","_data$stats","stats","_data$message8","_data$abilityList","abilityList","_data$abilityPoints","abilityPoints","_data$message9","_data$message10","_data$message11","_data$message12","_data$players","players","_data$message13","_data$players2","_data$abilityName","abilityName","username","password","send","version","name","skin","instanceName","objectIDs","sendString","stringify","str","readyState","EventEmitter","Footer","dispatchers_ModalDispatcher","header","body","footer","dispatchers_NavDispatcher","menu","showMenu","Login","props","usernameInput","passwordInput","usernameToSave","state","pending","onConnect","setState","onLogin","saveUsername","NavDispatcher","showCharacterSelect","ModalDispatcher","modal","on","query","URL","searchParams","get","getSavedUsername","connect","removeListener","showRegister","preventDefault","login","localStorage","setItem","getItem","Banner_Banner","Form","onSubmit","bind","FormGroup","Label","Input","innerRef","input","type","maxLength","disabled","required","Button","width","onClick","onCreate","Footer_Footer","Ajax","options","Promise","resolve","reject","_options$method","method","_options$headers","headers","_options$query","_options$data","xhr","XMLHttpRequest","queryString","open","setRequestHeader","request","parameters","params","param","push","concat","join","Access-Control-Allow-Origin","length","undefined","Access-Control-Allow-Headers","Register","confirmInput","showLogin","getCorsHeaders","post","then","response","clearForm","catch","onCancel","GameObject","_fw$MPGameEntity","imgAlias","height","team","anim","fw","getImageURLByAlias","setNametag","playAnimation","setCustomCollisionBounds","PlayerSkins","GameObjectFactory","_data$skin","TILE_SIZE","setImageAliasMany","missing","blacksmith","commander","paragon","templar","player1","player2","MapTiles","Grass","_fw$Sprite","StoneWall","_fw$Sprite2","grass","stonewall","TransportObject","_fw$GameEntity","nodeID","text","moveSpeed","TransportObjectFactory","airship","defaultFont","game_Game","Game","renderer","layers","objects","keys","collisionGrid","mapBounds","scroller","player","selectedTarget","onGameFrame","assertThisInitialized","processClick","started","todo","loadAliases","unloadMap","mapData","transportNodes","units","loadAssets","report","errs","images","errors","sounds","gmd","buildMap","tileSize","background","tileLayout","tileTypes","midground","foreground","onKey","toggleMapGrid","tData","createTransportNode","uData","createObject","startRendering","mapSprite","task","stopRendering","removeAll","clear","x","y","object","addObject","add","setPosition","selectTarget","ownerID","getObjectStats","getAbilityList","playerUpdate","getData","_this4","getObject","remove","removeObject","unselectTarget","_this5","updateObject","_data$spawnLocation","spawnLocation","col","row","tnode","addAt","element","injectInto","target","castAbility","numKeys","isKeyDown","moveUp","moveDown","moveLeft","moveRight","depthSort","CharacterSelect","errMessage","onCharacterList","onEnterMap","showGame","loadMap","getCharacterList","showCharacterCreate","logout","selectCharacter","characterListErrMsg","rows","i","characterData","level","last_map","selectPlayer","Table","renderLogoutBtn","onLogout","_this$state","_this$state$character","_this$state$errMessag","renderCharacterList","renderBody","CharacterCreate","nameInput","skinInput","onCharacterCreate","createCharacter","Row","Col","lg","GameViewChat","displayRef","createRef","inputRef","onChatReceived","elem","current","keyCode","chatMessage","ref","readOnly","onKeyUp","onChatSend","GameViewTarget","onObjectStats","base","_stats$level","colSpan","health","toFixed","mana","defense","resistance","renderStats","GameViewPlayer","xp","xpNeeded","MISSING_ABILITY_ICON","missingAbiltiyIcon","EMPTY_ABILITY_ICON","emptyAbilityIcon","ABILITY_ICONS","GameViewAbilities","disabledList","onAbilityList","onAbilityCast","removeFromDisabledList","onAbilityReady","sort","b","icons","Array","ability","requestCast","slice","renderAbilityList","GameViewDropdown","isOpen","onMapPlayers","_evt$players","playerStrings","map","getMapPlayers","DropdownItem","divider","upgradesModal","instanceModal","Dropdown","toggle","DropdownToggle","caret","DropdownMenu","onFindPlayers","onExit","renderAdminItems","InstanceModal","instanceNameInput","playersToInvite","onAvailablePlayers","onInstanceCreate","onInstanceModal","getAvailablePlayers","createInstance","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_loop","onChange","toggleInvite","_iterator","Symbol","iterator","next","done","return","Modal","ModalHeader","ModalBody","renderPlayers","ModalFooter","UpgradesModal","onAbilityUpgrade","onUpgradesModal","upgradeAbility","_abilityList$i","submitUpgrade","renderUpgradesTable","GameView","containerRef","onObjectCreate","onObjectDelete","onObjectUpdate","oEnterMap","GameViewChat_GameViewChat","GameViewTarget_GameViewTarget","GameViewPlayer_GameViewPlayer","GameViewAbilities_GameViewAbilities","GameViewDropdown_GameViewDropdown","InstanceModal_InstanceModal","UpgradesModal_UpgradesModal","AlertModal","onModal","App","onMenu","onClientClose","onClientError","Login_Login","Register_Register","CharacterSelect_CharacterSelect","CharacterCreate_CharacterCreate","GameView_GameView","renderMenu","AlertModal_AlertModal","ReactDOM","render","App_App","document","querySelector"],"mappings":"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","file":"static/js/main.0309bfe1.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/skin1.80aa8af3.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAACWCAYAAAAouC1GAAABc0lEQVR4nO3RQREAIRDAsOP8S1tP8EYBfSQKOtM1M/sj438dwM2QGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJOYAhDIEj9TrJPAAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAACWCAYAAAAouC1GAAABcElEQVR4nO3RQQ0AIBDAsAP/nuGNAvZoFSzZOjNnyNi/A3gZEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsRcy7UDKhga1CUAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAACWCAYAAAAouC1GAAABcElEQVR4nO3RQQ0AIBDAsAP/nuGNAvZoFSzZOjNnyNi/A3gZEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsRcy7UDKhga1CUAAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/commander.c0d57e63.png\";","module.exports = __webpack_public_path__ + \"static/media/paragon.ebf0cbaa.png\";","module.exports = __webpack_public_path__ + \"static/media/templar.1047f94c.png\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/stonewall.96add418.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAACWCAYAAAAouC1GAAABcElEQVR4nO3RQQ0AIBDAsAP/nuGNAvZoFSzZmjlnyNi/A3gZEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsRcybcDKgRYUCEAAAAASUVORK5CYII=\"","import React from \"react\";\r\n//import bannerImg from \"../img/banner.png\";\r\n\r\nexport class Banner extends React.Component{\r\n    render(){\r\n        return (\r\n            <div className=\"text-center\">\r\n                <h1>\r\n                    <img\r\n                        src={null}\r\n                        title=\"Fallen Crusade\"\r\n                        alt=\"Fallen Crusade\"\r\n                    />\r\n                </h1>\r\n            </div>\r\n        );\r\n    }\r\n}","/*\r\n    WebSocket communication constants \r\n*/\r\n\r\n// operation codes \r\nexport const OpCode = {\r\n    ACCOUNT_LOGIN:      2,\r\n    ACCOUNT_LOGOUT:     3,\r\n    CHARACTER_LIST:     4,\r\n    CHARACTER_CREATE:   5,\r\n    CHARACTER_SELECT:   6,\r\n    CHARACTER_DELETE:   7,\r\n    ENTER_MAP:          8,\r\n    ENTER_INSTANCE:     9,\r\n    CHAT_MESSAGE:       10,\r\n    OBJECT_CREATE:      11,\r\n    OBJECT_DELETE:      12,\r\n    OBJECT_UPDATE:      13,\r\n    OBJECT_STATS:       14,\r\n    FX_CREATE:          15,\r\n    ABILITY_LIST:       16,\r\n    ABILITY_UPGRADE:    17,\r\n    ABILITY_CAST:       18,\r\n    SKIN_PURCHASE:      19,\r\n    SKIN_CHANGE:        20,\r\n    INVITE_SEND:        21,\r\n    INVITE_NOTIFY:      22,\r\n    INVITE_REPLY:       23,\r\n    INVITE_RESPONSE:    24,\r\n    CREATE_INSTANCE:    25,\r\n    MAP_PLAYERS:        26,\r\n    AVAILABLE_PLAYERS:  27,\r\n    ABILITY_READY:      28,\r\n    BAD_REQUEST:        99\r\n}\r\n\r\n// server response status codes \r\nexport const Status = {\r\n    GOOD:   \"ok\",\r\n    BAD:    \"bad\"\r\n};\r\n\r\n// delimiter for message json\r\n// (messages can be sent simulteanously as a concatenated string) \r\nexport const MSG_DELIM = \"?&?\";","import { EventEmitter } from \"events\";\r\nimport { MSG_DELIM, OpCode, Status } from \"./Comm\";\r\n\r\nexport const CLIENT_VERSION = \"0.1.0\";\r\n\r\nclass Client extends EventEmitter{\r\n    constructor(){\r\n        super();\r\n\r\n        this.socket = null;         // the websocket\r\n        this.clientID = null;       // server-assigned ID \r\n        this.accessLevel = 0;       // server-assigned acccess level (commands UI)\r\n    }\r\n\r\n    // creates and connects the weboscket to the game server\r\n    connect(){\r\n        // can only connect if not connected\r\n        if(!this.isConnected){\r\n            // determine game server endpoint\r\n            // connects to current origin but with websocket protocols \r\n            // http=ws and https=wss\r\n            // switch to port 8080 from 3000 (3000 = react server, 8080 = test server)\r\n            let url = window.location.origin\r\n                .replace(\":3000\", \":8080\")\r\n                .replace(\"https://\", \"wss://\")\r\n                .replace(\"http://\", \"ws://\");\r\n\r\n            // create the websocket\r\n            this.socket = new WebSocket(url);\r\n\r\n            // handle websocket connection \r\n            this.socket.addEventListener(\"open\", () => {\r\n                this.emit(\"connect\");\r\n            });\r\n\r\n            // handle websocket error\r\n            this.socket.addEventListener(\"error\", err => {\r\n                this.emit(\"error\", err);\r\n            });\r\n\r\n            // handle websocket data\r\n            this.socket.addEventListener(\"message\", evt => {\r\n                this.handleData(evt.data.toString());\r\n            });\r\n\r\n            // handle websocket close\r\n            this.socket.addEventListener(\"close\", () => {\r\n                this.emit(\"close\");\r\n            });\r\n        }\r\n    }\r\n\r\n    // handles server data by parsing it then processing it (plain text at this point)\r\n    handleData(data){\r\n        // responses can be concatenated - split using delimiter\r\n        data.split(MSG_DELIM).forEach(msg => {\r\n            // each individual response... pepare to extract response parameters\r\n            let opCode, data, status;\r\n\r\n            // attempt to parse json \r\n            try{\r\n                // parse\r\n                let json = JSON.parse(msg);\r\n\r\n                // extract resposne parameters\r\n                // assign defaults if neccessary, but they should always be provided\r\n                opCode =    json.opCode ||  -1;\r\n                data =      json.data   ||  {};\r\n                status =    json.status ||  Status.BAD;\r\n\r\n                // print response (ignore object updates becase those are very frequent)\r\n                if(opCode !== OpCode.OBJECT_UPDATE) console.log(json);\r\n            }\r\n            catch(err){\r\n                // json parse error - skip this update (should never happen)\r\n                return;\r\n            }\r\n\r\n            // server data is now parsed, time to process the response\r\n            this.processResponse(opCode, data, status);\r\n        });\r\n    }\r\n\r\n    // processes the parsed server response data\r\n    processResponse(opCode, data, status){\r\n        // invoke handler based on opCode \r\n        switch(opCode){\r\n            case OpCode.ACCOUNT_LOGIN:\r\n                this.handleLogin(data, status);\r\n                break;\r\n            case OpCode.ACCOUNT_LOGOUT:\r\n                this.handleLogout(data, status);\r\n                break;\r\n            case OpCode.CHARACTER_LIST:\r\n                this.handleCharacterList(data, status);\r\n                break;\r\n            case OpCode.CHARACTER_CREATE:\r\n                this.handleCharacterCreate(data, status);\r\n                break;\r\n            case OpCode.ENTER_MAP:\r\n                this.handleMapEnter(data, status);\r\n                break;\r\n            case OpCode.ENTER_INSTANCE:\r\n                this.handleInstanceEnter(data, status);\r\n                break;\r\n            case OpCode.CHAT_MESSAGE:\r\n                this.handleChatMessage(data, status);\r\n                break;\r\n            case OpCode.OBJECT_CREATE:\r\n                this.handleObjectCreate(data, status);\r\n                break;\r\n            case OpCode.OBJECT_DELETE:\r\n                this.handleObjectDelete(data, status);\r\n                break;\r\n            case OpCode.OBJECT_UPDATE:\r\n                this.handleObjectUpdate(data, status);\r\n                break;\r\n            case OpCode.OBJECT_STATS:\r\n                this.handleObjectStats(data, status);\r\n                break;\r\n            case OpCode.ABILITY_LIST:\r\n                this.handleAbilityList(data, status);\r\n                break;\r\n            case OpCode.ABILITY_UPGRADE:\r\n                this.handleAbilityUpgrade(data, status);\r\n                break;\r\n            case OpCode.ABILITY_CAST:\r\n                this.handleAbilityCast(data, status);\r\n                break;\r\n            case OpCode.CREATE_INSTANCE:\r\n                this.handleCreateInstance(data, status);\r\n                break;\r\n            case OpCode.MAP_PLAYERS:\r\n                this.handleMapPlayers(data, status);\r\n                break;\r\n            case OpCode.AVAILABLE_PLAYERS:\r\n                this.handleAvailablePlayers(data, status);\r\n                break;\r\n            case OpCode.ABILITY_READY:\r\n                this.handleAbilityReady(data, status);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    // handles a login response \r\n    handleLogin(data, status){\r\n        // extract response properties\r\n        let {message=null, clientID=null, accessLevel=1} = data;\r\n\r\n        // store clientID and access level if there was a successful login \r\n        if(status === Status.GOOD){\r\n            this.clientID =     clientID;\r\n            this.accessLevel =  accessLevel;\r\n        }\r\n\r\n        // trigger login listeners\r\n        this.emit(\"login\", {message, status})\r\n    }\r\n\r\n    // handles a logout acknowledgement \r\n    handleLogout(data, status){\r\n        // extract response properties\r\n        let {message=null} = data;\r\n\r\n        // trigger logout listeners\r\n        this.emit(\"logout\", {message, status});\r\n    }\r\n\r\n    // handles a character list response \r\n    handleCharacterList(data, status){\r\n        // extract response properties\r\n        let {message=null, characterList=null} = data;\r\n\r\n        // trigger character list listeners\r\n        this.emit(\"character-list\", {message, characterList, status});\r\n    }\r\n\r\n    // handles character create response \r\n    handleCharacterCreate(data, status){\r\n        // extract response properties\r\n        let {message=null} = data;\r\n\r\n        // trigger character create listeners\r\n        this.emit(\"character-create\", {message, status});\r\n    }\r\n\r\n    // handles entering a map response\r\n    handleMapEnter(data, status){\r\n        // extract response properties \r\n        let {message=null, mapState=null} = data;\r\n\r\n        // trigger entering map listeners \r\n        this.emit(\"enter-map\", {message, mapState, status});\r\n    }\r\n\r\n    // handles enter an instance repsonse \r\n    handleInstanceEnter(data, status){\r\n        // extract response properties \r\n        let {message=null, mapState=null} = data;\r\n\r\n        // trigger entering instance listeners\r\n        this.emit(\"enter-instance\", {message, mapState, status});\r\n    }\r\n\r\n    // handles a chat message\r\n    handleChatMessage(data, status){\r\n        // extract response properties \r\n        let {chat=\"\", from=null} = data;\r\n        \r\n        // trigger chat listeners\r\n        this.emit(\"chat\", {chat, from, status});\r\n    }\r\n\r\n    // handles object creation notification\r\n    handleObjectCreate(data){\r\n        // extract object properties\r\n        let {spawnState=null} = data;\r\n\r\n        // trigger object create listeners\r\n        this.emit(\"object-create\", {spawnState});\r\n    }\r\n\r\n    // handles object delete notifications \r\n    handleObjectDelete(data){\r\n        // extract response properties \r\n        let {objectID=null} = data;\r\n\r\n        // trigger object delete listeners\r\n        this.emit(\"object-delete\", {objectID});\r\n    }\r\n\r\n    // handles object update notifications \r\n    handleObjectUpdate(data){\r\n        // extract response properties \r\n        let {updateState=null} = data;\r\n\r\n        // trigger object update listeners\r\n        this.emit(\"object-update\", {updateState});\r\n    }\r\n\r\n    // handles object stats response\r\n    handleObjectStats(data, status){\r\n        // extract response properties \r\n        let {message=null, stats=null} = data;\r\n\r\n        // trigger object stats listeners \r\n        this.emit(\"object-stats\", {message, stats, status});\r\n    }\r\n\r\n    // handles ability list response\r\n    handleAbilityList(data, status){\r\n        // extract response properties\r\n        let {message=null, abilityList=null, abilityPoints=0} = data;\r\n\r\n        // trigger ability list listeners\r\n        this.emit(\"ability-list\", {message, abilityList, abilityPoints, status});\r\n    }\r\n\r\n    // handles ability upgrade response\r\n    handleAbilityUpgrade(data, status){\r\n        // extract response properites\r\n        let {message=null} = data;\r\n\r\n        // trigger ability upgrade listeners\r\n        this.emit(\"ability-upgrade\", {message, status});\r\n    }\r\n\r\n    // handles abiltiy cast response\r\n    handleAbilityCast(data, status){\r\n        // extract response property\r\n        let {message=null} = data;\r\n\r\n        // trigger ability cast listeners\r\n        this.emit(\"ability-cast\", {message, status});\r\n    }\r\n\r\n    // handles create instance reponse \r\n    handleCreateInstance(data, status){\r\n        // extract response properties\r\n        let {message=null} = data;\r\n\r\n        // trigger create instance listeners\r\n        this.emit(\"create-instance\", {message, status});\r\n    }\r\n\r\n    // handles map players response \r\n    handleMapPlayers(data, status){\r\n        // extract response properties\r\n        let {message=null, players=null} = data;\r\n\r\n        // trigger map players listeners\r\n        this.emit(\"map-players\", {players, message, status});\r\n    }\r\n\r\n    // handles all possible players to invite response\r\n    handleAvailablePlayers(data, status){\r\n        // extract response properties\r\n        let {message=null, players=null} = data;\r\n\r\n        // trigger available player listenres\r\n        this.emit(\"available-players\", {players, message, status});\r\n    }\r\n\r\n    // handles ability ready notifications\r\n    handleAbilityReady(data, status){\r\n        // extract property\r\n        let {abilityName=\"\"} = data;\r\n\r\n        // trigger ability ready listeners\r\n        this.emit(\"ability-ready\", {abilityName, status});\r\n    }\r\n\r\n    // request to login to an account\r\n    // gives the login credentials: username, password, and client verison \r\n    login(username, password){\r\n        let version = CLIENT_VERSION;\r\n        this.send(OpCode.ACCOUNT_LOGIN, {username, password, version});\r\n    }\r\n\r\n    // submit a logout to the server\r\n    logout(){\r\n        // destroy current ID\r\n        this.clientID = null;\r\n        // send request\r\n        this.send(OpCode.ACCOUNT_LOGOUT);\r\n    }\r\n\r\n    // request the list of all characters associated with the account\r\n    // (*** gives a 'preview' which does not include all character data ***)\r\n    getCharacterList(){\r\n        this.send(OpCode.CHARACTER_LIST);\r\n    }\r\n\r\n    // requests a character to be created\r\n    // gives the name and skin ID of the character\r\n    createCharacter(name, skin){\r\n        this.send(OpCode.CHARACTER_CREATE, {name, skin});\r\n    }\r\n\r\n    // request a character select (*** auto joins map ***)\r\n    // gives the name of the selected character\r\n    selectCharacter(name){\r\n        this.send(OpCode.CHARACTER_SELECT, {name});\r\n    }\r\n\r\n    // submits a chat message\r\n    // gives the chat text \r\n    chatMessage(chat){\r\n        this.send(OpCode.CHAT_MESSAGE, {chat});\r\n    }\r\n\r\n    // submits a player update\r\n    // gives the player's current data (x, y, anim, objectID)\r\n    playerUpdate(data){\r\n        this.send(OpCode.OBJECT_UPDATE, data);\r\n    }\r\n\r\n    // requests the stats for a target object\r\n    // gives the objectID of the target\r\n    getObjectStats(objectID){\r\n        this.send(OpCode.OBJECT_STATS, {objectID});\r\n    }\r\n\r\n    // requests the current ability list\r\n    getAbilityList(){\r\n        this.send(OpCode.ABILITY_LIST);\r\n    }\r\n\r\n    // requests an ability ugrade\r\n    // gives the name of the ability to upgrade \r\n    upgradeAbility(abilityName){\r\n        this.send(OpCode.ABILITY_UPGRADE, {abilityName});\r\n    }\r\n\r\n    // request an ability cast\r\n    // gives the ability's name and the target's objectID \r\n    castAbility(abilityName, objectID){\r\n        this.send(OpCode.ABILITY_CAST, {abilityName, objectID});\r\n    }\r\n\r\n    // requests an instance to be generated\r\n    // gives teh name of the instance to create\r\n    createInstance(instanceName, objectIDs){\r\n        this.send(OpCode.CREATE_INSTANCE, {instanceName, objectIDs});\r\n    }\r\n\r\n    // requests info about every player in the current map\r\n    getMapPlayers(){\r\n        this.send(OpCode.MAP_PLAYERS);\r\n    }\r\n\r\n    // requests all players that can be invited\r\n    getAvailablePlayers(){\r\n        this.send(OpCode.AVAILABLE_PLAYERS);\r\n    }\r\n\r\n    // sends a formatted request through the websocket \r\n    send(opCode, data){\r\n        // server expects json string with opCode and data \r\n        this.sendString(JSON.stringify({opCode, data}));\r\n    }\r\n\r\n    // sends a utf8 string to the client (auto delimited for if messages are sent together)\r\n    sendString(str){\r\n        // must be connected to send requests \r\n        if(this.isConnected){\r\n            this.socket.send(str + MSG_DELIM);\r\n        }\r\n    }\r\n\r\n    // connected client = has a socket that is in the connected ready state \r\n    get isConnected(){\r\n        return this.socket && this.socket.readyState === 1;\r\n    }\r\n}\r\n\r\n// export singleton\r\nexport default new Client();","import React from \"react\";\r\nimport { CLIENT_VERSION } from \"./../game/Client\";\r\n\r\nexport class Footer extends React.Component{\r\n    render(){\r\n        return (\r\n            <footer className=\"text-center\">\r\n                <hr/>\r\n                David Rosenblum, 2019 | v{CLIENT_VERSION}\r\n            </footer>\r\n        );\r\n    }\r\n}","import { EventEmitter } from \"events\";\r\n\r\nclass ModalDispatcher extends EventEmitter{\r\n    modal(header, body, footer){\r\n        this.emit(\"modal\", {header, body, footer});\r\n    }\r\n\r\n    instanceModal(){\r\n        this.emit(\"instance-modal\");\r\n    }\r\n\r\n    upgradesModal(){\r\n        this.emit(\"upgrades-modal\");\r\n    }\r\n}\r\n\r\n// export singleton\r\nexport default new ModalDispatcher();","import { EventEmitter } from \"events\";\r\n\r\nclass NavDispatcher extends EventEmitter{\r\n    showMenu(menu){\r\n        this.emit(\"menu\", {menu});\r\n    }\r\n\r\n    showLogin(){\r\n        this.showMenu(\"login\");\r\n    }\r\n\r\n    showRegister(){\r\n        this.showMenu(\"register\");\r\n    }\r\n\r\n    showCharacterSelect(){\r\n        this.showMenu(\"character-select\")\r\n    }\r\n\r\n    showCharacterCreate(){\r\n        this.showMenu(\"character-create\");\r\n    }\r\n\r\n    showGame(){\r\n        this.showMenu(\"game\");\r\n    }\r\n}\r\n\r\n// export singleton\r\nexport default new NavDispatcher();","import React from \"react\";\r\nimport { Form, FormGroup, Label, Input, Button } from \"reactstrap\";\r\nimport { BUTTON_WIDTH, INPUT_MAX_LENGTH } from \"../data/Data\";\r\nimport { Banner } from \"./Banner\";\r\nimport { Footer } from \"./Footer\";\r\nimport Client from \"../game/Client\";\r\nimport ModalDispatcher from \"../dispatchers/ModalDispatcher\";\r\nimport NavDispatcher from \"../dispatchers/NavDispatcher\";\r\n\r\n\r\nexport class Login extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.usernameInput = null;      // username <input>\r\n        this.passwordInput = null;      // password <input>\r\n        this.usernameToSave = null;     // username to save to local storage (to load next time)\r\n\r\n        this.state = {\r\n            pending: false              // awaiting login response (locks the UI)\r\n        };\r\n\r\n        // handler for when the client's websocket establishes a connection to the server\r\n        // (note: close and error are handled in App.jsx)\r\n        this.onConnect = () => {\r\n            // connected - unlock the UI \r\n            this.setState({pending: false});   \r\n        };\r\n\r\n        // handler for when the client receives the login response\r\n        this.onLogin = evt => {\r\n            // got a resposne \r\n            if(evt.status === \"ok\"){\r\n                // successful login\r\n                // stores the username \r\n                this.saveUsername(this.usernameToSave);\r\n                // show the character selection menu\r\n                NavDispatcher.showCharacterSelect();\r\n            }\r\n            else{\r\n                // failed to login - display error message\r\n                ModalDispatcher.modal(\"Login Error\", evt.message);\r\n                // unlock the UI\r\n                this.setState({pending: false});\r\n            }\r\n        };\r\n    }\r\n\r\n    componentDidMount(){\r\n        // listen for the client's websocket to connect\r\n        Client.on(\"connect\", this.onConnect);\r\n        // listen for the client to receive a login response \r\n        Client.on(\"login\", this.onLogin);\r\n\r\n        // url query strings \r\n        let query = new URL(window.location).searchParams;\r\n        let username = query.get(\"username\");\r\n        let password = query.get(\"password\");\r\n\r\n        // optional restore from query, fallback to last successful login username from local storage or empty\r\n        this.usernameInput.value = username || (this.getSavedUsername() || \"\");\r\n\r\n        // optional restore password from query\r\n        this.passwordInput.value = password || \"\";\r\n\r\n        // if the socket is not connected\r\n        if(!Client.isConnected){\r\n            // lock the UI and connect (connection unlocks UI)\r\n            this.setState({pending: true});\r\n            Client.connect();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        // stop listening for the client's websocket to connect (prevents leak)\r\n        Client.removeListener(\"connect\", this.onConnect);\r\n        // stop listening for the client to receive a login response (prevents leak)\r\n        Client.removeListener(\"login\", this.onLogin);\r\n    }\r\n\r\n    // when the create account button is clicked...\r\n    onCreate(){\r\n        // show the register account menu \r\n        NavDispatcher.showRegister();\r\n    }\r\n\r\n    // when the login form is submitted...\r\n    onSubmit(evt){\r\n        // prevent page reload\r\n        evt.preventDefault();\r\n\r\n        // extract username text\r\n        let username = this.usernameInput.value;\r\n        // extract password text\r\n        let password = this.passwordInput.value;\r\n\r\n        // store the username (will save to local storage on successful login)\r\n        this.usernameToSave = username;\r\n\r\n        // send the login request \r\n        Client.login(username, password);\r\n    }\r\n\r\n    // saves the parameter to local storage as 'username'\r\n    saveUsername(username){\r\n        window.localStorage.setItem(\"username\", username);\r\n    }\r\n\r\n    // gets the last saved 'username' value \r\n    getSavedUsername(){\r\n        return window.localStorage.getItem(\"username\") || null;\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div>\r\n                <br/>\r\n                <Banner/>\r\n                <br/>\r\n                <div className=\"app-menu\">\r\n                    <Form onSubmit={this.onSubmit.bind(this)}>\r\n                        <FormGroup>\r\n                            <Label>Username</Label>\r\n                            <Input\r\n                                innerRef={input => this.usernameInput = input}\r\n                                type=\"text\"\r\n                                maxLength={INPUT_MAX_LENGTH}\r\n                                disabled={this.state.pending}\r\n                                required\r\n                            />\r\n                        </FormGroup>\r\n                        <FormGroup>\r\n                            <Label>Password</Label>\r\n                            <Input\r\n                                innerRef={input => this.passwordInput = input}\r\n                                type=\"password\"\r\n                                maxLength={INPUT_MAX_LENGTH}\r\n                                disabled={this.state.pending}\r\n                                required\r\n                            />\r\n                        </FormGroup>\r\n                        <div className=\"text-center\">\r\n                            <Button width={BUTTON_WIDTH} disabled={this.state.pending}>\r\n                                Submit\r\n                            </Button>\r\n                            &nbsp;\r\n                            <Button\r\n                                type=\"button\"\r\n                                width={BUTTON_WIDTH}\r\n                                disabled={this.state.pending}\r\n                                onClick={this.onCreate.bind(this)}\r\n                            >\r\n                                Create\r\n                            </Button>\r\n                        </div>\r\n                    </Form>\r\n                    <Footer/>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","/* UI constants */\r\n\r\n// <input> max length, such as username\r\nexport const INPUT_MAX_LENGTH =     20;     \r\n\r\n// <button> width, so all buttons are the same size regardless of text length\r\nexport const BUTTON_WIDTH =         125;   \r\n\r\n// max length for the character create name <input> \r\nexport const NAME_MAX_LENGTH =      15;\r\n\r\n// size of the ability icon <img> during gameplay \r\nexport const ABILITY_ICON_SIZE =    64;","export class Ajax{\r\n    // sends an http request (returns a promise)\r\n    static request(options){\r\n        return new Promise((resolve, reject) => {\r\n            // extract request parameters \r\n            let {url, method=\"GET\", headers=null, query=null, data=null} = options;\r\n\r\n            // create the request\r\n            let xhr = new XMLHttpRequest();\r\n            // handle\r\n            xhr.addEventListener(\"load\", () => resolve(xhr));\r\n            // handle errors\r\n            xhr.addEventListener(\"error\", err => reject(err));\r\n\r\n            // optional query strings\r\n            if(query){\r\n                url += Ajax.queryString(query);\r\n            }\r\n\r\n            // open the request\r\n            xhr.open(method, url, true);\r\n            \r\n            // optional request headers\r\n            if(headers){\r\n                for(let header in headers){\r\n                    xhr.setRequestHeader(header, headers[header]);\r\n                }\r\n            }\r\n\r\n            // send the request \r\n            xhr.send(data);\r\n        });\r\n    }\r\n\r\n    // sends an http GET request \r\n    static get(url, headers, query, data){\r\n        return Ajax.request({url, headers, query, data, method: \"GET\"});\r\n    }\r\n\r\n    // sends an http POST request\r\n    static post(url, headers, query, data){\r\n        return Ajax.request({url, headers, query, data, method: \"POST\"});\r\n    }\r\n\r\n    // generates a query string for the given parameters\r\n    // {linkinPark: \"meteora\", tool: \"lateralus\"} -> \"?linkinPark=meteora&tool=lateralus\"\r\n    static queryString(parameters){\r\n        let params = [];\r\n\r\n        for(let param in parameters){\r\n            params.push(`${param}=${parameters[param]}`);\r\n        }\r\n\r\n        return \"?\" + params.join(\"&\");\r\n    }\r\n\r\n    // gets simple cross-origin resource sharing (cors) headers object\r\n    static getCorsHeaders(origin=\"*\"){\r\n        return {\r\n            \"Access-Control-Allow-Origin\": origin,\r\n            \"Access-Control-Allow-Headers\": \"Access-Control-Allow-Origin\"\r\n        };\r\n    }\r\n}","import React from \"react\";\r\nimport { Form, FormGroup, Label, Input, Button } from \"reactstrap\";\r\nimport { BUTTON_WIDTH, INPUT_MAX_LENGTH } from \"../data/Data\";\r\nimport { Footer } from \"./Footer\";\r\nimport { Banner } from \"./Banner\";\r\nimport { Ajax } from \"../utils/Ajax\";\r\nimport ModalDispatcher from \"../dispatchers/ModalDispatcher\";\r\nimport NavDispatcher from \"../dispatchers/NavDispatcher\";\r\n\r\nexport class Register extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.usernameInput = null;      // username <input>\r\n        this.passwordInput = null;      // password <input>\r\n        this.confirmInput = null;       // confirm password <input>\r\n\r\n        this.state = {\r\n            pending: false              // awaiting account create response (locks UI)\r\n        };\r\n    }\r\n\r\n    // clears the form text fields \r\n    clearForm(){\r\n        this.usernameInput.value = \"\";  // clear the username <input> text\r\n        this.passwordInput.value = \"\";  // clear the password <input> text\r\n        this.confirmInput.value = \"\";   // clear the confirm password <input> text\r\n    }\r\n\r\n    // when the cancel buton is clicked...\r\n    onCancel(){\r\n        // show the login menu\r\n        NavDispatcher.showLogin();\r\n    }\r\n\r\n    // when the form is submitted...\r\n    onSubmit(evt){\r\n        // prevent page reload \r\n        evt.preventDefault();\r\n\r\n        // lock the UI \r\n        this.setState({pending: true});\r\n\r\n        // extract username text\r\n        let username = this.usernameInput.value;\r\n        // extract password text\r\n        let password = this.passwordInput.value;\r\n        // extract confirm password text \r\n        let confirm = this.confirmInput.value;\r\n\r\n        // enforce the passwords match \r\n        if(password !== confirm){\r\n            // they do not - display error\r\n            ModalDispatcher.modal(\"Passwords Error\", \"Passwords do not match.\");\r\n            // unlock UI\r\n            this.setState({pending: false});\r\n            return;\r\n        }\r\n\r\n        // generate the url for character creation API \r\n        let url = `${window.location.origin.replace(\":3000\", \":8080\")}/accounts/create`;\r\n        // get request header (cors)\r\n        let headers = Ajax.getCorsHeaders();\r\n        // no request query\r\n        let query = null;\r\n        // create a json string of the account data\r\n        let data = JSON.stringify({username, password});\r\n\r\n        // send the request \r\n        Ajax.post(url, headers, query, data)\r\n            .then(xhr => {\r\n                // server responded - could be good or bad\r\n                // set header based on success (200 == success)\r\n                let header = xhr.status === 200 ? \"Account Created\" : \"Account Error\";\r\n                // display the response (xhr.response is server-generated)\r\n                ModalDispatcher.modal(header, xhr.response);\r\n\r\n                // clear input fields on success\r\n                if(xhr.status === 200){\r\n                    this.clearForm();\r\n                }\r\n            })\r\n            .catch(() => {\r\n                // http request error, basically request failed to send (not a 4xx or 5xx!)\r\n                ModalDispatcher.modal(\"Request Error\", \"HTTP request failed.\");\r\n            })\r\n            .then(() => {\r\n                // unlock the UI \r\n                this.setState({pending: false})\r\n            });\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div>\r\n                <br/>\r\n                <Banner/>\r\n                <br/>\r\n                <div className=\"app-menu\">\r\n                    <Form onSubmit={this.onSubmit.bind(this)}>\r\n                        <FormGroup>\r\n                            <Label>Username</Label>\r\n                            <Input\r\n                                innerRef={input => this.usernameInput = input}\r\n                                type=\"text\"\r\n                                maxLength={INPUT_MAX_LENGTH}\r\n                                disabled={this.state.pending}\r\n                                required\r\n                            />\r\n                        </FormGroup>\r\n                        <FormGroup>\r\n                            <Label>Password</Label>\r\n                            <Input\r\n                                innerRef={input => this.passwordInput = input}\r\n                                type=\"password\"\r\n                                maxLength={INPUT_MAX_LENGTH}\r\n                                disabled={this.state.pending}\r\n                                required\r\n                            />\r\n                        </FormGroup>\r\n                        <FormGroup>\r\n                            <Label>Confirm Password</Label>\r\n                            <Input\r\n                                innerRef={input => this.confirmInput = input}\r\n                                type=\"password\"\r\n                                maxLength={INPUT_MAX_LENGTH}\r\n                                disabled={this.state.pending}\r\n                                required\r\n                            />\r\n                        </FormGroup>\r\n                        <div className=\"text-center\">\r\n                            <Button width={BUTTON_WIDTH} disabled={this.state.pending}>\r\n                                Submit\r\n                            </Button>\r\n                            &nbsp;\r\n                            <Button\r\n                                width={BUTTON_WIDTH}\r\n                                type=\"button\"\r\n                                onClick={this.onCancel.bind(this)}\r\n                                disabled={this.state.pending}\r\n                            >\r\n                                Cancel\r\n                            </Button>\r\n                        </div>\r\n                    </Form>\r\n                    <Footer/>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","import * as fw from \"@davidrosenblum/frostwork\";\r\nimport { TILE_SIZE } from \"../game/Game\";\r\nimport missing from \"../img/misc/missing.png\";\r\nimport blacksmith from \"../img/red.png\";\r\nimport commander from \"../img/npcs/commander.png\";\r\nimport paragon from \"../img/npcs/paragon.png\";\r\nimport templar from \"../img/npcs/templar.png\";\r\nimport player1 from \"../img/player_skins/skin1.png\";\r\nimport player2 from \"../img/player_skins/skin1.png\";\r\n\r\nexport class GameObject extends fw.MPGameEntity{\r\n    constructor(imgAlias, width, height, name, objectID, team, anim){\r\n        super(fw.AssetUtils.getImageURLByAlias(imgAlias), width, height, 0, 0, objectID, team);\r\n\r\n        if(name) this.setNametag(name);\r\n        if(anim) this.playAnimation(anim);\r\n\r\n        this.setCustomCollisionBounds(width, height * 0.20);\r\n    }\r\n}\r\n\r\n// game skins start at 1 - so keep 0 as a dupe \r\nexport const PlayerSkins = [\r\n    \"player1\", \"player1\", \"player2\"\r\n];\r\n\r\nexport const GameObjectFactory = {\r\n    create(data){\r\n        let {type, name, anim, objectID, team, skin=1} = data;\r\n\r\n        switch(type){\r\n            case \"blacksmith\":\r\n                return new GameObject(\"blacksmith\", TILE_SIZE, TILE_SIZE*2, name, objectID, team, anim);\r\n            case \"commander\":\r\n                return new GameObject(\"commander\", TILE_SIZE, TILE_SIZE*2, name, objectID, team, anim);\r\n            case \"paragon\":\r\n                return new GameObject(\"paragon\", TILE_SIZE, TILE_SIZE*2, name, objectID, team, anim);\r\n            case \"templar\":\r\n                return new GameObject(\"templar\", TILE_SIZE, TILE_SIZE*2, name, objectID, team, anim);\r\n            case \"player\":\r\n                return new GameObject(PlayerSkins[skin], TILE_SIZE, TILE_SIZE*2, name, objectID, team, anim);\r\n            default:\r\n                return new GameObject(\"missing\", TILE_SIZE, TILE_SIZE*2, name, objectID, team, anim);\r\n        }\r\n    }\r\n};\r\n\r\nfw.AssetUtils.setImageAliasMany({\r\n    missing, blacksmith, commander, paragon, templar, player1, player2\r\n});","import * as fw from \"@davidrosenblum/frostwork\";\r\nimport { TILE_SIZE } from \"../game/Game\";\r\nimport grass from \"../img/environment/grass.png\";\r\nimport stonewall from \"../img/environment/stonewall.png\";\r\n\r\n// holds all the map tile classes \r\nexport const MapTiles = {\r\n    Grass: class Grass extends fw.Sprite{\r\n        constructor(){\r\n            super(fw.AssetUtils.getImageURLByAlias(\"grass\"), TILE_SIZE, TILE_SIZE);\r\n        }\r\n    },\r\n\r\n    StoneWall: class StoneWall extends fw.Sprite{\r\n        constructor(){\r\n            super(fw.AssetUtils.getImageURLByAlias(\"stonewall\"), TILE_SIZE, TILE_SIZE * 2.5);\r\n        }\r\n    }\r\n};\r\n\r\n// all map object image files (maps usable name: react image file)\r\nfw.AssetUtils.setImageAliasMany({\r\n    grass, stonewall\r\n});","import * as fw from \"@davidrosenblum/frostwork\";\r\nimport airship from \"../img/silver.png\";\r\n\r\n// transport objects are game entities that can't move and have nodeIDs \r\nexport class TransportObject extends fw.GameEntity{\r\n    constructor(imgAlias, width, height, nodeID, text){\r\n        super(fw.AssetUtils.getImageURLByAlias(imgAlias), width, height);\r\n\r\n        this.nodeID = nodeID;\r\n        this.setNametag(text);\r\n        this.moveSpeed = 0;\r\n    }\r\n}\r\n\r\n// creates transport objects using server-provided data\r\nexport const TransportObjectFactory = {\r\n    create(data){\r\n        let {type, nodeID, text} = data;\r\n\r\n        switch(type){\r\n            case \"airship\":\r\n                return new TransportObject(\"airship\", 100, 100, nodeID, text, nodeID, text);\r\n            default:\r\n                return null;\r\n        }\r\n    }\r\n}\r\n\r\n// all transport object image files (maps usable name: react image file)\r\nfw.AssetUtils.setImageAliasMany({\r\n    airship\r\n});","import * as fw from \"@davidrosenblum/frostwork\";\r\nimport { EventEmitter } from \"events\";\r\nimport { GameObjectFactory } from \"../data/GameObjects\";\r\nimport { MapTiles } from \"../data/MapObjects\";\r\nimport { TransportObjectFactory } from \"../data/TransportObjects\";\r\nimport Client from \"./Client\";\r\nimport ModalDispatcher from \"../dispatchers/ModalDispatcher\";\r\n\r\n// how big each tile square is for the game (game is tile-based)\r\nexport const TILE_SIZE = 96;\r\n\r\n// default font for each unit's nametag and any floating game text \r\nfw.TextField.defaultFont = \"15px electrolize\";\r\n\r\n// game singleton\r\nclass Game extends EventEmitter{\r\n    constructor(){\r\n        super();\r\n\r\n        this.renderer = new fw.Renderer(1920, 1080);     // the renderer (has the canvas)\r\n        this.layers = new fw.MapLayers();               // map layers (background, midground, foreground)\r\n        this.objects = new fw.MPEntityStorage();        // game object updater\r\n        this.keys = null;                               // keyboard input listener\r\n        this.collisionGrid = null;                      // has every static collidable object stored\r\n        this.mapBounds = null;                          // the bounds of the map\r\n        this.scroller = null;                           // performs x-y scrolling\r\n        this.player = null;                             // the player object\r\n\r\n        // current selected game object\r\n        this.selectedTarget = null;\r\n\r\n        // process everything required for next frame before the underlying framework is renders\r\n        this.renderer.on(\"render\", this.onGameFrame.bind(this));\r\n        // when the renderer's canvas is clicked, have the layers object determine if a game object is at the mouse \r\n        this.renderer.on(\"click\", evt => this.layers.processClick(evt));\r\n\r\n        // game is not started and ready to receive tasks\r\n        this.started = false;\r\n        this.todo = [];\r\n    }\r\n\r\n    // preloads assets (marked in the /data folder)\r\n    loadAssets(){\r\n        // since file paths can be long and weird\r\n        // each asset is mapped to a friendly name (like player instead of foo/bar/player.png)\r\n        // and all marked assets can be asychronously loaded at once \r\n        return fw.AssetUtils.loadAliases();\r\n    }\r\n\r\n    // asychronously loads the map \r\n    // mapState is provided by the server \r\n    async loadMap(mapState){\r\n        // destroy existing map\r\n        this.unloadMap();\r\n\r\n        // extract response data\r\n        // ({name} also in mapState)\r\n        let {mapData, transportNodes, units} = mapState;\r\n        \r\n        // asychronously load all assets (wait for this to complete)\r\n        let report = await this.loadAssets();\r\n        \r\n        // calculate the total amount of assets failed to load (hopefully 0!) \r\n        let errs = report.images.errors + report.sounds.errors; \r\n        if(errs){\r\n            // 1+ errors found - alert the user that assets failed to load\r\n            // (game continues)\r\n            ModalDispatcher.modal(\r\n                \"Assets Error\",\r\n                `Error: ${errs} assets failed to load. The game will run, but some things might be missing.`\r\n            );\r\n        }\r\n\r\n        // build the map, which returns the GMD (generated map data - includes bounds & collision data)\r\n        let gmd = this.layers.buildMap({\r\n            tileSize: TILE_SIZE,\r\n            background: {\r\n                tileLayout: mapData.background,\r\n                tileTypes:  [null, MapTiles.Grass]\r\n            },\r\n            midground: {\r\n                tileLayout: mapData.midground,\r\n                tileTypes:  [null, MapTiles.StoneWall]\r\n            },\r\n            foreground: {\r\n                tileLayout: mapData.foreground,\r\n                tileTypes:  [null]\r\n            },\r\n        });\r\n\r\n        // instantiate the keyboard listener (used for keyboard inputs)\r\n        this.keys = new fw.KeyboardWatcher();\r\n        // click '+' to toggle map grid \r\n        this.keys.onKey(\"+\", () => this.layers.toggleMapGrid());\r\n        // collision grid for collision detection, relative to loaded map\r\n        this.collisionGrid = gmd.collisionGrid;\r\n        // get the bounds (top, left, bottom, right) of the map \r\n        this.mapBounds = gmd.mapBounds;\r\n        // scroller to have X-Y scrolling \r\n        this.scroller = new fw.Scroller(this.renderer, this.mapBounds);\r\n\r\n        // create each transport node \r\n        transportNodes.forEach(tData => this.createTransportNode(tData));\r\n        // create each game object (synonymous in the code as 'unit')\r\n        units.forEach(uData => this.createObject(uData));\r\n\r\n        // begin rendering the game\r\n        this.renderer.startRendering(this.layers.mapSprite);\r\n\r\n        // game at this point is considered initialized\r\n        this.started = true;\r\n        // process every task that occurred between the server entering this client in the map and now \r\n        this.todo.forEach(task => task());\r\n        // reset the task list for next time \r\n        this.todo = [];\r\n    }\r\n\r\n    // destroys the current map\r\n    // game stops listening for inputs and stops rendering \r\n    unloadMap(){\r\n        // the game is no longer initialized\r\n        this.started = false;\r\n        // stop renderings\r\n        this.renderer.stopRendering();\r\n\r\n        // remove all objects from all draw lists\r\n        this.layers.removeAll();\r\n        // reset object updater \r\n        this.objects.clear();\r\n\r\n        // nullify fields relevant to current map \r\n        this.keys = null;\r\n        this.collisionGrid = null;\r\n        this.mapBounds = null;\r\n        this.scroller = null;\r\n        this.player = null;\r\n    }\r\n\r\n    // creates a game object\r\n    createObject(data){\r\n        // if the game has not started, process this when the game begins\r\n        // (handles case were create object update comes while the game is still initializing)\r\n        if(!this.started){\r\n            this.todo.push(() => this.createObject(data));\r\n            return;\r\n        }\r\n\r\n        // extract possible location of object\r\n        let {x, y} = data;\r\n        // create the object \r\n        let object = GameObjectFactory.create(data);\r\n\r\n        // if the object was created and successfully added...\r\n        if(object && this.objects.addObject(object)){\r\n            // position the object\r\n            this.layers.add(object);\r\n            object.setPosition(x, y - object.height);\r\n\r\n            // select any object when it is clicked \r\n            object.on(\"click\", () => this.selectTarget(object));\r\n\r\n            // check if the object is the current player \r\n            if(data.type === \"player\" && data.ownerID === Client.clientID){\r\n                // player found!\r\n                this.player = object;\r\n                \r\n                // load the current stats and abilities \r\n                Client.getObjectStats(object.objectID);\r\n                Client.getAbilityList();\r\n\r\n                // update the server on validated movements \r\n                object.on(\"move\", () => Client.playerUpdate(object.getData()));\r\n            }\r\n        }\r\n    }\r\n\r\n    // removes an object from the game (won't be rendered or updated)\r\n    removeObject(objectID){\r\n        // if the game has not started, process this when the game begins\r\n        // (handles case were delete object update comes while game is still initializing)\r\n        if(!this.started){\r\n            this.todo.push(() => this.removeObject(objectID));\r\n            return;\r\n        }\r\n\r\n        // find the object\r\n        let object = this.objects.getObject(objectID);\r\n        // if the object exists (it always should), remove it from rendering and updater\r\n        if(object){\r\n            object.remove();\r\n            this.objects.removeObject(object);\r\n\r\n            // selected target just deleted?\r\n            if(Game.selectedTarget && Game.selectedTarget.objectID === objectID){\r\n                Game.unselectTarget();\r\n            }\r\n        }\r\n    }\r\n\r\n    // updates a game object (animation, position, etc)\r\n    updateObject(data){\r\n        // if the game has not started, process this when the game begins\r\n        // (handles case were update object comes while game is still initializing)\r\n        if(!this.started){\r\n            this.todo.push(() => this.updateObject(data));\r\n            return;\r\n        }\r\n\r\n        // tell the updater to update apply the object update\r\n        this.objects.updateObject(data);\r\n    }\r\n\r\n    // creates a transport node object \r\n    // used for requesting to enter a new map \r\n    createTransportNode(data){\r\n        // get the spawn location (tile points, not x-y)\r\n        let {col, row} = data.spawnLocation;\r\n        // create the object\r\n        let tnode = TransportObjectFactory.create(data);\r\n        // if successful, add it to the game \r\n        if(tnode){\r\n            this.layers.addAt(tnode, col, row);\r\n        }\r\n    }\r\n\r\n    // injects the <canvas> into the DOM \r\n    // (not very reactful)\r\n    injectInto(element){\r\n        this.renderer.injectInto(element);\r\n    }\r\n\r\n    // selects an object - requests the target's stats (triggers UI update)\r\n    selectTarget(target){\r\n        // remove current selection\r\n        this.unselectTarget();\r\n        // store new target\r\n        this.selectedTarget = target;\r\n        // get target stats (triggers UI update)\r\n        Client.getObjectStats(target.objectID);\r\n    }\r\n\r\n    // cancels current target selection \r\n    unselectTarget(){\r\n        // must have a target \r\n        if(this.selectedTarget){\r\n            // (remove any changes made)\r\n            // remove now previous target\r\n            this.selectedTarget = null;\r\n        }\r\n    }\r\n\r\n    // submits a cast ability request to the server \r\n    castAbility(abilityName){\r\n        // must have a target\r\n        if(this.selectedTarget){\r\n            // send the request \r\n            Client.castAbility(abilityName, this.selectedTarget.objectID);\r\n        }\r\n    }\r\n\r\n    // immediately before rendering the next frame... \r\n    onGameFrame(){\r\n        // check for movement input if a player exists and if at least 1 key is pressed \r\n        if(this.player && this.keys.numKeys > 0){\r\n            // move up? \r\n            if(this.keys.isKeyDown(\"w\")){\r\n                this.player.moveUp(this.collisionGrid, this.mapBounds, this.scroller);\r\n            }\r\n            // move down?\r\n            else if(this.keys.isKeyDown(\"s\")){\r\n                this.player.moveDown(this.collisionGrid, this.mapBounds, this.scroller);\r\n            }\r\n            // move left? \r\n            if(this.keys.isKeyDown(\"a\")){\r\n                this.player.moveLeft(this.collisionGrid, this.mapBounds, this.scroller);\r\n            }\r\n            // move right?\r\n            else if(this.keys.isKeyDown(\"d\")){\r\n                this.player.moveRight(this.collisionGrid, this.mapBounds, this.scroller);\r\n            }\r\n\r\n            // depth sort the game (midground) layer \r\n            this.layers.depthSort();\r\n        }\r\n    }\r\n}\r\n\r\n// export singleton \r\nexport default new Game();","import React from \"react\";\r\nimport { Table, Button } from \"reactstrap\";\r\nimport { BUTTON_WIDTH } from \"../data/Data\";\r\nimport Client from \"../game/Client\";\r\nimport Game from \"../game/Game\";\r\nimport ModalDispatcher from \"../dispatchers/ModalDispatcher\";\r\nimport NavDispatcher from \"../dispatchers/NavDispatcher\";\r\n\r\nexport class CharacterSelect extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            pending:        false,  // awaiting character list (locks UI)\r\n            characterList:  null,   // character list array\r\n            errMessage:     null    // error message string \r\n        };\r\n\r\n        // handler for when the client receives the character list \r\n        this.onCharacterList = evt => {\r\n            if(evt.status === \"ok\"){\r\n                // succeess - render character list\r\n                this.setState({characterList: evt.characterList || null});\r\n            }\r\n            else{\r\n                // failed - display error message\r\n                ModalDispatcher.modal(\"Characters Error\", evt.message);\r\n                this.setState({errMessage: evt.message});\r\n            }\r\n        };\r\n\r\n        // handler for when the client receives the enter map OR enter instance signal\r\n        // (should always be map since you cant first enter into an instance?)\r\n        this.onEnterMap = evt => {\r\n            // must be successful to continue to game\r\n            if(evt.status === \"ok\"){\r\n                // success - show the game\r\n                NavDispatcher.showGame();\r\n                // begin loading the map with received map data\r\n                Game.loadMap(evt.mapState);\r\n            }\r\n            else{\r\n                // fail - display error message\r\n                ModalDispatcher.modal(\"Characters Error\", evt.message);\r\n                // unlock UI \r\n                this.setState({pending: false});\r\n            }\r\n        };\r\n    }\r\n\r\n    componentDidMount(){\r\n        // listen for the client to receive the character list\r\n        Client.on(\"character-list\", this.onCharacterList);\r\n        // listen for the client to enter a map (this will happen after successful character select)\r\n        Client.on(\"enter-map\", this.onEnterMap);\r\n        // listen for the client to enter an instance \r\n        Client.on(\"enter-instance\", this.onEnterMap);\r\n\r\n        // request the character list \r\n        Client.getCharacterList();\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        // stop listening for the client to receive the character list (prevents leak)\r\n        Client.removeListener(\"character-list\", this.onCharacterList);\r\n        // stop listening for the client to receive the enter map signal (prevents leak)\r\n        Client.removeListener(\"enter-map\", this.onEnterMap);\r\n        // stop listening for the client to receive the enter instance signal (prevents leak)\r\n        Client.removeListener(\"enter-instance\", this.onEnterMap);\r\n    }\r\n\r\n    // when a create character button is clicked...\r\n    onCreate(){\r\n        // show the character create menu\r\n        NavDispatcher.showCharacterCreate();\r\n    }\r\n\r\n    // when the logout button is clicked...\r\n    onLogout(){\r\n        // send the logout 'request'\r\n        Client.logout();\r\n        // show the login menu\r\n        NavDispatcher.showLogin();\r\n    }\r\n\r\n    selectPlayer(name){\r\n        // lock the UI while awaiting selection response\r\n        this.setState({pending: true});\r\n        // send the character select request \r\n        Client.selectCharacter(name);\r\n    }\r\n\r\n    renderCharacterList(){\r\n        let characterList = this.state.characterList;\r\n\r\n        if(!characterList){\r\n            return <div>{this.state.characterListErrMsg || \"Loading...\"}</div>;\r\n        }\r\n\r\n        let rows = [];\r\n\r\n        for(let i = 0; i < 6; i++){\r\n            let characterData = characterList[i] || null;\r\n\r\n            if(characterData){\r\n                let {name, level, last_map} = characterData;\r\n\r\n                rows.push(\r\n                    <tr key={i}>\r\n                        <td>{name}</td>\r\n                        <td>Level {level}</td>\r\n                        <td>{last_map}</td>\r\n                        <td>\r\n                            <Button\r\n                                width={BUTTON_WIDTH}\r\n                                onClick={() => this.selectPlayer(name)}\r\n                                disabled={this.state.pending}\r\n                            >\r\n                                Select\r\n                            </Button>\r\n                        </td>\r\n                    </tr>\r\n                );\r\n            }\r\n            else{\r\n                rows.push(\r\n                    <tr key={i}>\r\n                        <td>\r\n                            <Button\r\n                                width={BUTTON_WIDTH}\r\n                                onClick={this.onCreate.bind(this)}\r\n                                disabled={this.state.pending}\r\n                            >\r\n                                Create\r\n                            </Button>\r\n                        </td>\r\n                    </tr>\r\n                );\r\n            }\r\n        }\r\n\r\n        // render the table\r\n        return (\r\n            <div>\r\n                <Table>\r\n                    <thead>\r\n                        {rows}\r\n                    </thead>\r\n                </Table>\r\n                {this.renderLogoutBtn()}\r\n            </div>  \r\n        )\r\n    }\r\n\r\n    // renders the logout button\r\n    renderLogoutBtn(){\r\n        return (\r\n            <div className=\"text-center\">\r\n                <Button width={BUTTON_WIDTH} disabled={this.state.pending} onClick={this.onLogout.bind(this)}>\r\n                    Logout\r\n                </Button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // renders the body (character list or error message)\r\n    renderBody(){\r\n        // extract character list and error message\r\n        let {characterList=null, errMessage=null} = this.state;\r\n\r\n        // if there is an error message - render the error in the body \r\n        if(errMessage){\r\n            return (\r\n                <div>\r\n                    <div>{errMessage}</div>\r\n                    {this.renderLogoutBtn()}\r\n                </div>\r\n            );\r\n        }\r\n\r\n        // if no error and character list - render the character list table\r\n        else if(characterList){\r\n            return this.renderCharacterList();\r\n        }\r\n\r\n        // else - character list is still loading \r\n        return <div>Loading...</div>\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div>\r\n                <div className=\"app-menu\">\r\n                    <br/>\r\n                    {this.renderBody()}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","import React from \"react\";\r\nimport { Form, FormGroup, Label, Input, Button, Row, Col } from \"reactstrap\";\r\nimport { NAME_MAX_LENGTH, BUTTON_WIDTH } from \"../data/Data\";\r\nimport Client from \"../game/Client\";\r\nimport NavDispatcher from \"../dispatchers/NavDispatcher\";\r\nimport ModalDispatcher from \"../dispatchers/ModalDispatcher\";\r\n\r\nexport class CharacterCreate extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.nameInput = null;  // <input> element for the name\r\n        this.skinInput = null;  // <input> element for the skin (dropdown)\r\n\r\n        this.state = {\r\n            pending: false      // awaiting response (locks UI)\r\n        };\r\n\r\n        // handler for when the client receives a character create response \r\n        this.onCharacterCreate = evt => {\r\n            // got a response \r\n            if(evt.status === \"ok\"){\r\n                // successful response - show the character select menu\r\n                // (will have the new character in its slot)\r\n                NavDispatcher.showMenu(\"character-select\");\r\n            }\r\n            else{\r\n                // failed response\r\n                // display error message\r\n                ModalDispatcher.modal(\"Character Error\", evt.message);\r\n                // unlock UI \r\n                this.setState({pending: false});\r\n            }\r\n        };\r\n    }\r\n\r\n    componentDidMount(){\r\n        // listen for the client to recieve a character create response \r\n        Client.on(\"character-create\", this.onCharacterCreate);\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        // stop listening for the client to recieve a character create response (prevents leak)\r\n        Client.removeListener(\"character-create\", this.onCharacterCreate);\r\n    }\r\n\r\n    // when the click button is clicked\r\n    onCancel(){\r\n        // show the character select menu \r\n        NavDispatcher.showMenu(\"character-select\");\r\n    }\r\n\r\n    // when the form is submitted (enforces 'required' elements)\r\n    onSubmit(evt){\r\n        evt.preventDefault();               // prevent page reload \r\n\r\n        this.setState({pending: true});     // lock the UI\r\n\r\n        let name = this.nameInput.value;    // extract name\r\n        let skin = this.skinInput.value;    // extract skin\r\n\r\n        Client.createCharacter(name, skin); // send the request\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div>\r\n                <br/>\r\n                <div className=\"app-menu\">\r\n                    <Form onSubmit={this.onSubmit.bind(this)}>\r\n                        <FormGroup>\r\n                            <Label>Name</Label>\r\n                            <Input\r\n                                innerRef={input => this.nameInput = input}\r\n                                type=\"text\"\r\n                                maxLength={NAME_MAX_LENGTH}\r\n                                disabled={this.state.pending}\r\n                                required\r\n                            />\r\n                        </FormGroup>\r\n                        <FormGroup>\r\n                            <Label>Skin</Label>\r\n                            <Row>\r\n                                <Col lg={6}>\r\n                                    <Input\r\n                                        innerRef={input => this.skinInput = input}\r\n                                        type=\"select\"\r\n                                        disabled={this.state.pending}\r\n                                        required\r\n                                    >\r\n                                        <option value={1}>Human Male</option>\r\n                                        <option value={2}>Human Female</option>\r\n                                    </Input>\r\n                                </Col>\r\n                                <Col lg={6}>\r\n                                    (Preview)\r\n                                </Col>\r\n                            </Row>\r\n                        </FormGroup>\r\n                        <div className=\"text-center\">\r\n                            <Button>\r\n                                Submit\r\n                            </Button>\r\n                            &nbsp;\r\n                            <Button type=\"button\" width={BUTTON_WIDTH} onClick={this.onCancel.bind(this)}>\r\n                                Cancel\r\n                            </Button>\r\n                        </div>\r\n                    </Form>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","import React from \"react\";\r\nimport Client from \"../game/Client\";\r\n\r\nexport class GameViewChat extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.displayRef = React.createRef();\r\n        this.inputRef = React.createRef();\r\n\r\n        // handler for when the client receives chat messages \r\n        this.onChatReceived = evt => {\r\n            // must receive a good update \r\n            if(evt.status === \"ok\"){\r\n                // get the chat display <textarea> element\r\n                let elem = this.displayRef.current;\r\n                // formate the new text ('from' might not be provided)\r\n                let text = evt.from ? `${evt.from}: ${evt.chat}` : evt.chat;\r\n\r\n                // upate the <textarea> \r\n                if(elem.value){\r\n                    // put new text underneath old text \r\n                    elem.value += \"\\n\" + text;\r\n                }\r\n                else{\r\n                    // no text - make display text the first chat message\r\n                    elem.value = text;\r\n                }\r\n            }\r\n        };\r\n    }\r\n\r\n    componentDidMount(){\r\n        // listen for the client to get a chat message\r\n        Client.on(\"chat\", this.onChatReceived);\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        // stop listening for the client to get chat messages (prevents leak)\r\n        Client.removeListener(\"chat\", this.onChatReceived);\r\n    }\r\n\r\n    // sends a chat message\r\n    onChatSend(evt){\r\n        // 13 = enter key \r\n        if(evt.keyCode === 13){\r\n            // get the chat message from the DOM\r\n            let chat = this.inputRef.current.value;\r\n            // must have chat to send (pointless to send empty text)\r\n            if(chat){\r\n                // send the chat\r\n                Client.chatMessage(chat);\r\n                // clear the chat input \r\n                this.inputRef.current.value = \"\";\r\n            }\r\n        }\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div className=\"hud-chat\">\r\n                <textarea\r\n                    ref={this.displayRef}\r\n                    readOnly\r\n                />\r\n                <br/>\r\n                <input\r\n                    ref={this.inputRef}\r\n                    type=\"text\"\r\n                    maxLength={128}\r\n                    onKeyUp={this.onChatSend.bind(this)}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}","import React from \"react\";\r\nimport Client from \"../game/Client\";\r\nimport Game from \"../game/Game\";\r\n\r\nexport class GameViewTarget extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            stats: null\r\n        };\r\n\r\n        // handler for when the client gets object stats\r\n        // (this component is the view for target object stats)\r\n        this.onObjectStats = evt => {\r\n            // must still have a selected target and successful response\r\n            if(evt.status === \"ok\" && Game.selectedTarget){\r\n                // extract stats\r\n                let {stats} = evt;\r\n\r\n                // if the stats match up with select target - update the UI \r\n                if(Game.selectedTarget.objectID === stats.objectID){\r\n                    this.setState({stats});\r\n                }\r\n            }\r\n        };\r\n    }\r\n\r\n    componentDidMount(){\r\n        // listen for the client to receive object stats \r\n        Client.on(\"object-stats\", this.onObjectStats);\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        // stop listening for object stats (prevents leak)\r\n        Client.removeListener(\"object-stats\", this.onObjectStats);\r\n    }\r\n\r\n    // renders the stats table (note: different from player stats)\r\n    renderStats(){\r\n        // extract the stats, return nothing if no stats\r\n        let stats = this.state.stats;\r\n        if(!stats) return null;\r\n\r\n        // extract stats values \r\n        // note: base and current are objects, the rest are strings or numbers \r\n        let {base, current, name, team, level=null} = stats;\r\n\r\n        return (\r\n            <table>\r\n                <tbody>\r\n                    <tr className=\"text-center\">\r\n                        <td colSpan={2}>\r\n                            {name} {level ? `(${level})` : null}\r\n                        </td>\r\n                    </tr>\r\n                    <tr className=\"text-center\">\r\n                        <td colSpan={2}>\r\n                            &lt;{team}&gt;\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>\r\n                            HP\r\n                        </td>\r\n                        <td>\r\n                            {current.health.toFixed(0)} / {base.health.toFixed(0)}\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>\r\n                            MP\r\n                        </td>\r\n                        <td>\r\n                            {current.mana.toFixed(0)} / {base.mana.toFixed(0)}\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>\r\n                            DEF\r\n                        </td>\r\n                        <td>\r\n                            {(base.defense * 100).toFixed(0)}%\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>\r\n                            RES\r\n                        </td>\r\n                        <td>\r\n                            {(base.resistance * 100).toFixed(0)}%\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        );\r\n    }\r\n\r\n    render(){\r\n        return this.state.stats ? (\r\n            <div className=\"hud-target\">\r\n                {this.renderStats()}\r\n            </div>\r\n        ) : null;\r\n    }\r\n}","import React from \"react\";\r\nimport Client from \"../game/Client\";\r\nimport Game from \"../game/Game\";\r\n\r\nexport class GameViewPlayer extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            stats: null\r\n        };\r\n\r\n        // handler for when the client gets object stats\r\n        // (this component is the view for player object stats)\r\n        this.onObjectStats = evt => {\r\n            // game must have a player and the response be successful \r\n            if(evt.status === \"ok\" && Game.player){\r\n                // extract the stats\r\n                let {stats} = evt;\r\n\r\n                // update the UI if the stats match up with the game player \r\n                if(Game.player.objectID === stats.objectID){\r\n                    this.setState({stats});\r\n                }\r\n            }\r\n        };\r\n    }\r\n\r\n    componentDidMount(){\r\n        // listen for the client to receive object stats \r\n        Client.on(\"object-stats\", this.onObjectStats);\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        // stop listening for object stats (prevents leak)\r\n        Client.removeListener(\"object-stats\", this.onObjectStats);\r\n    }\r\n\r\n    // renders the stats table (note: different from target stats)\r\n    renderStats(){\r\n        // extract the player stats, return nothing if no stats\r\n        let stats = this.state.stats;\r\n        if(!stats) return null;\r\n\r\n        // extract player stats \r\n        let {base, current, level, xp, xpNeeded, name} = stats;\r\n\r\n        return (\r\n            <table>\r\n                <tbody>\r\n                    <tr className=\"text-center\">\r\n                        <td colSpan={2}>\r\n                            {name} - Level {level}\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>\r\n                            HP\r\n                        </td>\r\n                        <td>\r\n                            {current.health.toFixed(0)} / {base.health.toFixed(0)}\r\n                        </td>\r\n                        \r\n                    </tr>\r\n                    <tr>\r\n                        <td>\r\n                            MP\r\n                        </td>\r\n                        <td>\r\n                            {current.mana.toFixed(0)} / {base.mana.toFixed(0)}\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>\r\n                            XP\r\n                        </td>\r\n                        <td>\r\n                            {xp.toFixed(0)} / {xpNeeded.toFixed(0)}\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        );\r\n    }\r\n\r\n    render(){\r\n        return this.state.stats ? (\r\n            <div className=\"hud-player\">\r\n                {this.renderStats()}\r\n            </div>\r\n        ) : null;\r\n    }\r\n}","import emptyAbilityIcon from \"../img/silver.png\";\r\nimport missingAbiltiyIcon from \"../img/blue.png\";\r\n\r\n// image source for when an ability is missing\r\nexport const MISSING_ABILITY_ICON = missingAbiltiyIcon;\r\n\r\n// image source for when an empty ability\r\nexport const EMPTY_ABILITY_ICON = emptyAbilityIcon;\r\n\r\n// image sources for all known abilities \r\nexport const ABILITY_ICONS = {\r\n\r\n};\r\n\r\n","import React from \"react\";\r\nimport { ABILITY_ICON_SIZE } from \"../data/Data\";\r\nimport { ABILITY_ICONS, MISSING_ABILITY_ICON, EMPTY_ABILITY_ICON } from \"../data/AbilityIcons\";\r\nimport Client from \"../game/Client\";\r\nimport Game from \"../game/Game\";\r\n\r\nexport class GameViewAbilities extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            abilityList:    null,   // list of abilities to render \r\n            abilityPoints:  0,      // amount of upgrade points left\r\n            disabledList:   {}      // list of pending abilities\r\n        };\r\n\r\n        // handler for when the client receives an ability list update\r\n        this.onAbilityList = evt => {\r\n            // must be a successful response\r\n            if(evt.status === \"ok\"){\r\n                // update the UI \r\n                this.setState({abilityList: evt.abilityList});\r\n            }\r\n        };\r\n\r\n        // when an ability is casted...\r\n        this.onAbilityCast = evt => {\r\n            // if it fails - enable the icon\r\n            if(evt.status === \"bad\"){\r\n                this.removeFromDisabledList(evt.abilityName);\r\n            }\r\n        };\r\n\r\n        // when an ability is ready... remove from disabled list \r\n        this.onAbilityReady = evt => this.removeFromDisabledList(evt.abilityName);\r\n    }\r\n\r\n    // when the component mounts... append listeners\r\n    componentDidMount(){\r\n        // listen for the client to receive ability list\r\n        Client.on(\"ability-list\", this.onAbilityList);\r\n        // listen for the client to receive ability ready notification\r\n        Client.on(\"ability-ready\", this.onAbilityList);\r\n    }\r\n\r\n    // when the component unmounts... stop listeners\r\n    componentWillUnmount(){\r\n        // stop listening for the client to receive ability list (prevents leak)\r\n        Client.removeListener(\"ability-list\", this.onAbilityList);\r\n        // stop listening for the client to receive ability ready notification\r\n        Client.removeListener(\"ability-ready\", this.onAbilityList);\r\n    }\r\n\r\n    // removes an ability by name from the disabled icons list \r\n    removeFromDisabledList(abilityName){\r\n        // get the disabled list\r\n        let disabledList = this.state.disabledList || {};\r\n\r\n        // remove ability from disabled list\r\n        delete disabledList[abilityName];\r\n\r\n        // update disabled list\r\n        this.setState({disabledList});\r\n    }\r\n\r\n    // sends the cast request to the server and locks the icon \r\n    requestCast(abilityName){\r\n        // get currently disabled abilities\r\n        let disabledList = this.state.disabledList || {};\r\n\r\n        // disable the requested ability\r\n        disabledList[abilityName] = true;\r\n\r\n        // update the view\r\n        this.setState({disabledList});\r\n\r\n        // send the cast request \r\n        Game.castAbility(abilityName);\r\n    }\r\n\r\n    // renders the ability icons \r\n    renderAbilityList(){\r\n        // current abilities \r\n        let abilityList = this.state.abilityList || [];\r\n\r\n        // sort by display name\r\n        abilityList = abilityList.sort((a, b) => a.name > b.name ? 1 : -1);\r\n\r\n        // list of icons to render (there will always be 10 abilities)\r\n        let icons = new Array(10);\r\n        \r\n        // for each icon slot...\r\n        for(let i = 0; i < icons.length; i++){\r\n            // find the corresponding ability\r\n            let ability = abilityList[i] || null;\r\n\r\n            // if an ability exists at that position (and is unlocked)\r\n            if(ability && ability.level > 0){\r\n                let {abilityName, level, name} = ability;\r\n\r\n                // create an image that can be clicked\r\n                icons[i] = (\r\n                    <img\r\n                        key={i}\r\n                        src={ABILITY_ICONS[abilityName] || MISSING_ABILITY_ICON}\r\n                        width={ABILITY_ICON_SIZE}\r\n                        height={ABILITY_ICON_SIZE}\r\n                        disabled={abilityName in this.state.disabledList}\r\n                        title={`${name} (Level ${level})`}\r\n                        alt={`${name} (Level ${level})`}\r\n                        onClick={() => this.requestCast(abilityName)}\r\n                    />\r\n                );\r\n            }\r\n            else{\r\n                // create an empty slot image (not interactable)\r\n                icons[i] = (\r\n                    <img\r\n                        key={i}\r\n                        src={EMPTY_ABILITY_ICON}\r\n                        width={ABILITY_ICON_SIZE}\r\n                        height={ABILITY_ICON_SIZE}\r\n                        disabled={true}\r\n                        title={`(${ability ? ability.name : \"Ability\"} is not unlocked yet)`}\r\n                        alt={`(${ability ? ability.name : \"Ability\"} is not unlocked yet)`}\r\n                    />\r\n                );\r\n            }\r\n        }\r\n\r\n        // split the list into 5x2 tray \r\n        return (\r\n            <div>\r\n                {icons.slice(0, 5)}\r\n                <br/>\r\n                {icons.slice(5, 10)}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div className=\"hud-abilities\">\r\n                {this.renderAbilityList()}\r\n            </div>\r\n        );\r\n    }\r\n}","import React from \"react\";\r\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from \"reactstrap\";\r\nimport Client from \"../game/Client\";\r\nimport Game from \"../game/Game\";\r\nimport NavDispatcher from \"../dispatchers/NavDispatcher\";\r\nimport ModalDispatcher from \"../dispatchers/ModalDispatcher\";\r\n\r\nexport class GameViewDropdown extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            isOpen: false   // dropdown visible? \r\n        };\r\n\r\n        // handler for when the client receives players in map \r\n        this.onMapPlayers = evt => {\r\n            // dropdown must be active and successful response \r\n            if(evt.status === \"ok\"){\r\n                // get players array\r\n                let {players=[]} = evt;\r\n\r\n                // sort alphabetically by name\r\n                let sortedPlayers = players.sort((a, b) => a.name > b.name ? 1 : -1);\r\n\r\n                // conver to string\r\n                let playerStrings = sortedPlayers.map(player => `${player.name} (Level ${player.level})`);\r\n\r\n                // display the players \r\n                ModalDispatcher.modal(\r\n                    \"Nearby Players\",\r\n                    playerStrings.join(\", \")\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        // listen for the client to get the players in the map\r\n        Client.on(\"map-players\", this.onMapPlayers);\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        // stop listening for the client to get players in the map (prevents leak)\r\n        Client.removeListener(\"map-players\", this.onMapPlayers);\r\n    }\r\n\r\n    // toggles the dropdown \r\n    toggle(){\r\n        this.setState({isOpen: !this.state.isOpen});\r\n    }\r\n\r\n    // when the find players button is clicked...\r\n    onFindPlayers(){\r\n        // request player info\r\n        Client.getMapPlayers();\r\n    }\r\n\r\n    // when the exit button is clicked...\r\n    onExit(){\r\n        // stop the game\r\n        Game.unloadMap();\r\n        // show login menu\r\n        NavDispatcher.showLogin();\r\n        // send logout notification \r\n        Client.logout();\r\n    }\r\n\r\n    // renders special options based on client's access level \r\n    renderAdminItems(){\r\n        return Client.accessLevel > 1 ? [\r\n            <DropdownItem key={0} divider/>,\r\n            <DropdownItem key={1} header>Admin Commands</DropdownItem>,\r\n            <DropdownItem key={2} onClick={() => ModalDispatcher.upgradesModal()}>Upgrades Menu</DropdownItem>,\r\n            <DropdownItem key={3} onClick={() => ModalDispatcher.instanceModal()}>Instances Menu</DropdownItem>\r\n        ] : null;\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div className=\"hud-dropdown\">\r\n                <Dropdown isOpen={this.state.isOpen} toggle={this.toggle.bind(this)}>\r\n                    <DropdownToggle caret>\r\n                        Menu\r\n                    </DropdownToggle>\r\n                    <DropdownMenu>\r\n                        <DropdownItem header>Current Map</DropdownItem>\r\n                        <DropdownItem onClick={this.onFindPlayers.bind(this)}>Find Players</DropdownItem>\r\n                        <DropdownItem divider/>\r\n                        <DropdownItem header>Quit</DropdownItem>\r\n                        <DropdownItem onClick={this.onExit.bind(this)}>Exit/Logout</DropdownItem>\r\n                        {this.renderAdminItems()}\r\n                    </DropdownMenu>\r\n                </Dropdown>\r\n            </div>\r\n        )\r\n    }\r\n}","import React from \"react\";\r\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button, Table, Form, FormGroup, Label } from \"reactstrap\";\r\nimport Client from \"../game/Client\";\r\nimport ModalDispatcher from \"../dispatchers/ModalDispatcher\";\r\n\r\nexport class InstanceModal extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        // <input> that will hold the instance to create\r\n        this.instanceNameInput = null;\r\n        // all player object IDs to invite \r\n        this.playersToInvite = {};\r\n\r\n        this.state = {\r\n            isOpen:     false,      // modal visible?\r\n            pending:    false,      // loading players? (locks UI)\r\n            players:    null        // list of players to render\r\n        };\r\n\r\n        // when the client gets available players...\r\n        this.onAvailablePlayers = evt => {\r\n            if(evt.status === \"ok\"){\r\n                // got players - update the modal\r\n                this.setState({players: evt.players});\r\n            }\r\n            else{\r\n                // unable to load players - display error and close modal\r\n                ModalDispatcher.modal(\"Available Players Error\", evt.message);\r\n                this.setState({isOpen: false});\r\n            }\r\n        };\r\n\r\n        // when the instance creation responds...\r\n        this.onInstanceCreate = evt => {\r\n            if(evt.status === \"ok\"){\r\n                // instance created - hide modal (auto joins instance)\r\n                this.setState({isOpen: false});\r\n            }\r\n            else{\r\n                // failed to create - unlock UI and display error message \r\n                this.setState({pending: false});\r\n                ModalDispatcher.modal(\"Instance Error\", evt.message);\r\n            }\r\n        }\r\n\r\n        // when the modal is activated...\r\n        this.onInstanceModal = () => {\r\n            // show the modal and reset players (force reload)\r\n            this.setState({isOpen: true, players: null, pending: false});\r\n            // request players\r\n            Client.getAvailablePlayers();\r\n        };\r\n    }\r\n\r\n    // when the modal mounts... append listeners\r\n    componentDidMount(){\r\n        // listen for the modal to be activated\r\n        ModalDispatcher.on(\"instance-modal\", this.onInstanceModal);\r\n        // listen for the client to receive available players\r\n        Client.on(\"available-players\", this.onAvailablePlayers);\r\n        // listen for the client to create the instance\r\n        Client.on(\"create-instance\", this.onInstanceCreate);\r\n    }\r\n\r\n    // when the modal unmounts... clear listeners\r\n    componentWillUnmount(){\r\n        // stop listening for the modal to be activated\r\n        ModalDispatcher.removeListener(\"instance-modal\", this.onInstanceModal);\r\n        // stop listening for the client to receive available players\r\n        Client.removeListener(\"available-players\", this.onAvailablePlayers);\r\n        // stop listening for the client to create the instance\r\n        Client.removeListener(\"create-instance\", this.onInstanceCreate);\r\n    }\r\n\r\n    // toggles the create instance modal (can't close while pending response)\r\n    toggle(){\r\n        if(!this.state.pending){\r\n            this.setState({isOpen: !this.state.isOpen});\r\n        }\r\n    }\r\n\r\n    // toggles the player's object ID in the invite list \r\n    toggleInvite(objectID){\r\n        // ID in the invite list already?\r\n        if(objectID in this.playersToInvite){\r\n            // remove\r\n            delete this.playersToInvite[objectID];\r\n        }\r\n        // object not in invite list?\r\n        else{\r\n            // add \r\n            this.playersToInvite[objectID] = true;\r\n        }\r\n    }\r\n\r\n    // submits the create instance request \r\n    onSubmit(evt){\r\n        // prevent page reloading\r\n        evt.preventDefault();\r\n        // lock UI\r\n        this.setState({pending: true});\r\n\r\n        // get name of instance to create\r\n        let instanceName = this.instanceNameInput.value;\r\n        // get array of player IDs to invite\r\n        let objectIDs = Object.keys(this.playersToInvite);\r\n        \r\n        // request the instance (auto joins)\r\n        Client.createInstance(instanceName, objectIDs);\r\n\r\n        // clear the invite list for next time \r\n        this.playersToInvite = {};\r\n    }\r\n\r\n    // renders the player invite table \r\n    renderPlayers(){\r\n        // extract players and make sure its not null (null = loading, [] = no players)\r\n        let players = this.state.players;\r\n        if(!players) return <div>Loading...</div>;\r\n\r\n        // any players to invite?\r\n        if(!players.length){\r\n            return <div>No other available players to invite.</div>\r\n        }\r\n\r\n        // create the table rows\r\n        // [x] Invite? | PlayerName | Level # \r\n        let rows = [];\r\n        for(let player of players){\r\n            // extract current player data\r\n            let {level, name, objectID} = player;\r\n            // create the row\r\n            rows.push(\r\n                <tr key={name}>\r\n                    <td>\r\n                        <Input\r\n                            type=\"checkbox\"\r\n                            onChange={() => this.toggleInvite(objectID)}\r\n                            disabled={this.state.pending}\r\n                        /> Invite?\r\n                    </td>\r\n                    <td>\r\n                        {name}\r\n                    </td>\r\n                    <td>\r\n                        Level {level}\r\n                    </td>\r\n                </tr>\r\n            );\r\n        }\r\n\r\n        // return the generated table \r\n        return (\r\n            <div className=\"text-center\">\r\n                <Table>\r\n                    <tbody>\r\n                        {rows}\r\n                    </tbody>\r\n                </Table>\r\n            </div>\r\n        )        \r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <Modal isOpen={this.state.isOpen} toggle={this.toggle.bind(this)}>\r\n                <ModalHeader toggle={this.toggle.bind(this)}>\r\n                    Start Raid Instance\r\n                </ModalHeader>\r\n                <ModalBody>\r\n                    <Form onSubmit={this.onSubmit.bind(this)}>\r\n                        <FormGroup>\r\n                            <Label>Select Instance</Label>\r\n                            <Input\r\n                                innerRef={input => this.instanceNameInput = input}\r\n                                type=\"select\"\r\n                                disabled={this.state.pending}\r\n                                required\r\n                            >\r\n                                <option>Graveyard</option>\r\n                                <option>Crypt</option>\r\n                            </Input>\r\n                        </FormGroup>\r\n                        <FormGroup>\r\n                            <Label>Invite Players</Label>\r\n                            {this.renderPlayers()}\r\n                        </FormGroup>\r\n                        <div>\r\n                            <Button disabled={this.state.pending}>Create</Button>\r\n                        </div>\r\n                    </Form>\r\n                </ModalBody>\r\n                <ModalFooter>\r\n                </ModalFooter>\r\n            </Modal>\r\n        )\r\n    }\r\n}","import React from \"react\";\r\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Table, Button } from \"reactstrap\";\r\nimport { BUTTON_WIDTH } from \"../data/Data\";\r\nimport Client from \"../game/Client\";\r\nimport ModalDispatcher from \"../dispatchers/ModalDispatcher\";\r\n\r\nexport class UpgradesModal extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            isOpen:         false,      // modal visible?\r\n            abilityList:    null,       // list for table\r\n            pending:        false       // loading list? (locks UI)\r\n        };\r\n\r\n        // when the client receives the ability list...\r\n        this.onAbilityList = evt => {\r\n            if(evt.status === \"ok\"){\r\n                // got the list - update the modal\r\n                let {abilityList, abilityPoints} = evt;\r\n                this.setState({abilityList, abilityPoints});\r\n            }\r\n            else{\r\n                // failed to get list - close the modal and display error\r\n                this.setState({isOpen: false});\r\n                ModalDispatcher.modal(\"Ability List Error\", evt.message);\r\n            }\r\n        };\r\n\r\n        // when the client receives the ability upgrade response...\r\n        this.onAbilityUpgrade = evt => {\r\n            if(evt.status === \"ok\"){\r\n                // successful upgrade - close the modal\r\n                this.setState({isOpen: false});\r\n                Client.getAbilityList(); // update ability UI - this could be redudant\r\n            }\r\n            else{\r\n                // error upgrading - display error and unlock\r\n                this.setState({pending: false});\r\n                ModalDispatcher.modal(\"Upgrade Error\", evt.message);\r\n            }\r\n        }\r\n\r\n        // when the upgrades modal is triggered...\r\n        this.onUpgradesModal = () => {\r\n            // show the modal and reset ability list (forces update)\r\n            this.setState({isOpen: true, abilityList: null, abilityPoints: 0, pending: false});\r\n            // request updated ability list \r\n            Client.getAbilityList();\r\n        };\r\n    }\r\n\r\n    // when the modal mounts... append listeners\r\n    componentDidMount(){\r\n        // listen for the modal to be activated\r\n        ModalDispatcher.on(\"upgrades-modal\", this.onUpgradesModal);\r\n        // listen for the client to get the ability list \r\n        Client.on(\"ability-list\", this.onAbilityList);\r\n        // listen for the client to get the ability upgrade response\r\n        Client.on(\"ability-upgrade\", this.onAbilityUpgrade);\r\n    }\r\n\r\n    // when the modal unmounts... remove listeners\r\n    componentWillUnmount(){\r\n        // stop listening for the modal activation\r\n        ModalDispatcher.removeListener(\"upgrades-modal\", this.onUpgradesModal);\r\n        // stop listening for the client to get the abiltiy list \r\n        Client.removeListener(\"ability-list\", this.onAbilityList);\r\n        // stop listening for the client to get the ability upgrade response\r\n        Client.removeListener(\"ability-upgrade\", this.onAbilityUpgrade);\r\n    }\r\n\r\n    // toggles the upgreades modal (can't close while pending)\r\n    toggle(){\r\n        if(!this.state.pending){\r\n            this.setState({isOpen: !this.state.isOpen});\r\n        }\r\n    }\r\n\r\n    // submits the upgrade request\r\n    submitUpgrade(abilityName){\r\n        // lock the UI \r\n        this.setState({pending: true});\r\n\r\n        // send the request\r\n        Client.upgradeAbility(abilityName);\r\n    }\r\n\r\n    // renders the upgrades table \r\n    renderUpgradesTable(){\r\n        // extract ability list (current and locked abilities) and points to spend\r\n        let {abilityList, abilityPoints} = this.state;\r\n\r\n        // null ability list = still loading\r\n        if(!abilityList) return <div>Loading...</div>;\r\n\r\n        // must have points to upgrade! \r\n        if(!abilityPoints){\r\n            return <div>You have no ability points.</div>\r\n        }\r\n\r\n        // no current/locked abilities\r\n        if(!abilityList.length){\r\n            return <div>No abilities available.</div>;\r\n        }\r\n\r\n        // sort alphabetically \r\n        abilityList = abilityList.sort((a, b) => a.name > b.name ? 1 : -1);\r\n\r\n        // generate the table rows\r\n        let rows = [];\r\n        for(let i = 0; i < abilityList.length; i++){\r\n            // get ability properties\r\n            // note: name = display name, abilityName = server-recognized name \r\n            let {abilityName, name, level} = abilityList[i];\r\n\r\n            rows.push(\r\n                <tr key={i}>\r\n                    <td>\r\n                        {name}\r\n                    </td>\r\n                    <td>\r\n                        Level {level} to {level + 1}\r\n                    </td>\r\n                    <td>\r\n                        <Button\r\n                            width={BUTTON_WIDTH}\r\n                            onClick={() => this.submitUpgrade(abilityName)}\r\n                            disabled={this.state.pending}\r\n                        >\r\n                            {level > 0 ? \"Upgrade\" : \"Unlock\"}\r\n                        </Button>\r\n                    </td>\r\n                </tr>\r\n            )\r\n        }\r\n\r\n        // return the generated the table \r\n        return (\r\n            <div className=\"text-center\">\r\n                <Table>\r\n                    <tbody>\r\n                        {rows}\r\n                    </tbody>\r\n                </Table>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <Modal isOpen={this.state.isOpen} toggle={this.toggle.bind(this)}>\r\n                <ModalHeader toggle={this.toggle.bind(this)}>\r\n                    Ability Upgrades\r\n                </ModalHeader>\r\n                <ModalBody>\r\n                    {this.renderUpgradesTable()}\r\n                </ModalBody>\r\n                <ModalFooter>\r\n\r\n                </ModalFooter>\r\n            </Modal>\r\n        )\r\n    }\r\n}","import React from \"react\";\r\nimport \"./GameView.css\";\r\nimport Game from \"../game/Game\";\r\nimport Client from \"../game/Client\";\r\nimport { GameViewChat } from \"./GameViewChat\";\r\nimport { GameViewTarget } from \"./GameViewTarget\";\r\nimport { GameViewPlayer } from \"./GameViewPlayer\";\r\nimport { GameViewAbilities } from \"./GameViewAbilities\";\r\nimport { GameViewDropdown } from \"./GameViewDropdown\";\r\nimport { InstanceModal } from \"./InstanceModal\";\r\nimport { UpgradesModal } from \"./UpgradesModal\";\r\n\r\nexport class GameView extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        // ref for the <div> to inject the <canvas> into \r\n        this.containerRef = React.createRef();\r\n\r\n        // handler for when the client receives a create object notification\r\n        this.onObjectCreate = evt => Game.createObject(evt.spawnState);\r\n        // handler for when the client receives a delete object notification\r\n        this.onObjectDelete = evt => Game.removeObject(evt.objectID);\r\n        // handler for when the client receives an update object notification\r\n        this.onObjectUpdate = evt => Game.updateObject(evt.updateState);\r\n        // handler for when the client is notified of a map change \r\n        this.oEnterMap = evt => Game.loadMap(evt.mapState);\r\n\r\n    }\r\n\r\n    componentDidMount(){\r\n        // listen for when the client receives an object create notification\r\n        Client.on(\"object-create\", this.onObjectCreate);\r\n        // listen for when the client receives an object delete notification\r\n        Client.on(\"object-delete\", this.onObjectDelete);\r\n        // listen for when the client receives an object update notification\r\n        Client.on(\"object-update\", this.onObjectUpdate);\r\n        // listen for when the client receives a map change notification\r\n        Client.on(\"enter-map\", this.oEnterMap);\r\n        // listen for when the client enters an instance\r\n        Client.on(\"enter-instance\", this.oEnterMap);\r\n\r\n\r\n        // insert the game <canvas> element into the DOM\r\n        // (not very reactful - but whatever)\r\n        Game.injectInto(this.containerRef.current);\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        // stop listening for client receives an object create notification (prevents leak)\r\n        Client.removeListener(\"object-create\", this.onObjectCreate);\r\n        // stop listening for client receives an object delete notification (prevents leak)\r\n        Client.removeListener(\"object-delete\", this.onObjectDelete);\r\n        // stop listening for client receives an object update notification (prevents leak)\r\n        Client.removeListener(\"object-update\", this.onObjectUpdate);\r\n        // stop listening for when the client receives a map change notification\r\n        Client.removeListener(\"enter-map\", this.oEnterMap);\r\n        // stop listening for when the client enters an instance\r\n        Client.removeListener(\"enter-instance\", this.oEnterMap);\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div>\r\n                <div ref={this.containerRef} className=\"canvas-container\"></div>\r\n                <GameViewChat/>\r\n                <GameViewTarget/>\r\n                <GameViewPlayer/>\r\n                <GameViewAbilities/>\r\n                <GameViewDropdown/>\r\n                <InstanceModal/>\r\n                <UpgradesModal/>\r\n            </div>\r\n        );\r\n    }\r\n}","import React from \"react\";\r\nimport { Modal, ModalBody, ModalHeader, ModalFooter } from \"reactstrap\";\r\nimport ModalDispatcher from \"../dispatchers/ModalDispatcher\";\r\n\r\nexport class AlertModal extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            isOpen: false,      // visible or not?\r\n            header: null,       // header text\r\n            body: null,         // body text\r\n            footer: null        // footer text\r\n        };\r\n\r\n        // handler for when a display modal is triggered via the modal dispatcher \r\n        this.onModal = evt => {\r\n            // show the modal with the new text data \r\n            this.setState({\r\n                isOpen: true,\r\n                header: evt.header  || null,    // optional\r\n                body:   evt.body    || null,    // optional\r\n                footer: evt.footer  || null     // optional \r\n            })\r\n        };\r\n    }\r\n\r\n    componentWillMount(){\r\n        // listen for display modal triggers\r\n        ModalDispatcher.on(\"modal\", this.onModal);\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        // stop listening for display modal triggers (prevents leak)\r\n        ModalDispatcher.removeListener(\"modal\", this.onModal);\r\n    }\r\n\r\n    // toggles the modal\r\n    toggle(){\r\n        this.setState({isOpen: !this.state.isOpen});\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <Modal isOpen={this.state.isOpen} toggle={this.toggle.bind(this)}>\r\n                <ModalHeader toggle={this.toggle.bind(this)}>\r\n                    {this.state.header || null}\r\n                </ModalHeader>\r\n                <ModalBody>\r\n                    {this.state.body|| null}\r\n                </ModalBody>\r\n                <ModalFooter>\r\n                    {this.state.footer || null}\r\n                </ModalFooter>\r\n            </Modal>\r\n        );\r\n    }\r\n}","import React from \"react\";\r\nimport \"./App.css\";\r\nimport { Login } from \"./Login\";\r\nimport { Register } from \"./Register\";\r\nimport { CharacterSelect } from \"./CharacterSelect\";\r\nimport { CharacterCreate } from \"./CharacterCreate\";\r\nimport { GameView } from \"./GameView\";\r\nimport { AlertModal } from \"./AlertModal\";\r\nimport Client from \"../game/Client\";\r\nimport NavDispatcher from \"../dispatchers/NavDispatcher\";\r\nimport ModalDispatcher from \"../dispatchers/ModalDispatcher\";\r\n\r\nexport class App extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            menu: \"login\"   // default menu is the login menu\r\n        };\r\n\r\n        // handler for when a menu change is triggered via modal dispatcher \r\n        this.onMenu = evt => this.setState({menu: evt.menu});\r\n\r\n        // handler for when the websocket closes\r\n        this.onClientClose = () => {\r\n            // display connection lost message\r\n            ModalDispatcher.modal(\"Socket Error\", \"Connection error.\");\r\n            // show the login menu\r\n            NavDispatcher.showLogin();\r\n        };\r\n\r\n        // handler for the websocket errors \r\n        this.onClientError = err => {};\r\n    }\r\n\r\n    componentDidMount(){\r\n        // listen for menu change signal from the navigation dispatcher \r\n        NavDispatcher.on(\"menu\", this.onMenu);\r\n        // listen for the websocket to close \r\n        Client.on(\"close\", this.onClientClose);\r\n        // listen for the websocket to error \r\n        Client.on(\"error\", this.onClientError);\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        // stop listening for menu changes (prevents leark)\r\n        NavDispatcher.removeListener(\"menu\", this.onMenu);\r\n        // stop listening for websocket closes (prevents leak)\r\n        Client.removeListener(\"close\", this.onClientClose);\r\n        // stop listening for websocket errors (prevents leak)\r\n        Client.removeListener(\"error\", this.onClientError);\r\n    }\r\n\r\n    // renders the current menu component \r\n    renderMenu(){\r\n        switch(this.state.menu){\r\n            case \"login\":\r\n                return <Login/>\r\n            case \"register\":\r\n                return <Register/>;\r\n            case \"character-select\":\r\n                return <CharacterSelect/>;\r\n            case \"character-create\":\r\n                return <CharacterCreate/>\r\n            case \"game\":\r\n                return <GameView/>;\r\n            default:\r\n                return null;\r\n        }\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div>\r\n                {this.renderMenu()}\r\n                <AlertModal/>\r\n            </div>\r\n        );\r\n    }\r\n}","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { App } from \"./components/App\";\r\nimport \"../node_modules/bootstrap/dist/css/bootstrap.min.css\";\r\n\r\nReactDOM.render(<App/>, document.querySelector(\"#root\"));"],"sourceRoot":""}
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAACWCAYAAAAouC1GAAABcElEQVR4nO3RQQ0AIBDAsAP/nuGNAvZoFSzZOjNnyNi/A3gZEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsRcy7UDKhga1CUAAAAASUVORK5CYII="},24:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAACWCAYAAAAouC1GAAABcElEQVR4nO3RQQ0AIBDAsAP/nuGNAvZoFSzZmjlnyNi/A3gZEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsQYEmNIjCExhsRcybcDKgRYUCEAAAAASUVORK5CYII="},25:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAACWCAYAAAAouC1GAAABc0lEQVR4nO3RQREAIRDAsOP8S1tP8EYBfSQKOtM1M/sj438dwM2QGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJMaQGENiDIkxJOYAhDIEj9TrJPAAAAAASUVORK5CYII="},48:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAADH0lEQVR4nO3UMQEAIAzAsIFY/DsAGRxNFPTqmjN3gKT9OwD4xwAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAgzAAg7AHxPgNloRSyTgAAAABJRU5ErkJggg=="},49:function(e,t,n){e.exports=n(81)},54:function(e,t,n){},70:function(e,t,n){},81:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),s=n(15),r=n.n(s),l=n(3),o=n(8),c=n(6),u=n(5),h=n(7),A=(n(54),n(82)),d=n(83),m=n(84),g=n(85),E=n(58),v=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"text-center"},i.a.createElement("h1",null,i.a.createElement("img",{src:null,title:"Fallen Crusade",alt:"Fallen Crusade"})))}}]),t}(i.a.Component),p=n(14),b=2,y=3,f=4,j=5,k=6,z=8,C=9,I=10,O=11,N=12,x=13,L=14,S=16,M=17,Q=18,w=25,D=26,Y=27,U=28,G="ok",R="bad",P=new(function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).socket=null,e.clientID=null,e.accessLevel=0,e}return Object(h.a)(t,e),Object(o.a)(t,[{key:"connect",value:function(){var e=this;if(!this.isConnected){var t=window.location.origin.replace(":3000",":8080").replace("https://","wss://").replace("http://","ws://");this.socket=new WebSocket(t),this.socket.addEventListener("open",function(){e.emit("connect")}),this.socket.addEventListener("error",function(t){e.emit("error",t)}),this.socket.addEventListener("message",function(t){e.handleData(t.data.toString())}),this.socket.addEventListener("close",function(){e.emit("close")})}}},{key:"handleData",value:function(e){var t=this;e.split("?&?").forEach(function(e){var n,a,i;try{var s=JSON.parse(e);n=s.opCode||-1,a=s.data||{},i=s.status||R,n!==x&&console.log(s)}catch(r){return}t.processResponse(n,a,i)})}},{key:"processResponse",value:function(e,t,n){switch(e){case b:this.handleLogin(t,n);break;case y:this.handleLogout(t,n);break;case f:this.handleCharacterList(t,n);break;case j:this.handleCharacterCreate(t,n);break;case z:this.handleMapEnter(t,n);break;case C:this.handleInstanceEnter(t,n);break;case I:this.handleChatMessage(t,n);break;case O:this.handleObjectCreate(t,n);break;case N:this.handleObjectDelete(t,n);break;case x:this.handleObjectUpdate(t,n);break;case L:this.handleObjectStats(t,n);break;case S:this.handleAbilityList(t,n);break;case M:this.handleAbilityUpgrade(t,n);break;case Q:this.handleAbilityCast(t,n);break;case w:this.handleCreateInstance(t,n);break;case D:this.handleMapPlayers(t,n);break;case Y:this.handleAvailablePlayers(t,n);break;case U:this.handleAbilityReady(t,n)}}},{key:"handleLogin",value:function(e,t){var n=e.message,a=void 0===n?null:n,i=e.clientID,s=void 0===i?null:i,r=e.accessLevel,l=void 0===r?1:r;t===G&&(this.clientID=s,this.accessLevel=l),this.emit("login",{message:a,status:t})}},{key:"handleLogout",value:function(e,t){var n=e.message,a=void 0===n?null:n;this.emit("logout",{message:a,status:t})}},{key:"handleCharacterList",value:function(e,t){var n=e.message,a=void 0===n?null:n,i=e.characterList,s=void 0===i?null:i;this.emit("character-list",{message:a,characterList:s,status:t})}},{key:"handleCharacterCreate",value:function(e,t){var n=e.message,a=void 0===n?null:n;this.emit("character-create",{message:a,status:t})}},{key:"handleMapEnter",value:function(e,t){var n=e.message,a=void 0===n?null:n,i=e.mapState,s=void 0===i?null:i;this.emit("enter-map",{message:a,mapState:s,status:t})}},{key:"handleInstanceEnter",value:function(e,t){var n=e.message,a=void 0===n?null:n,i=e.mapState,s=void 0===i?null:i;this.emit("enter-instance",{message:a,mapState:s,status:t})}},{key:"handleChatMessage",value:function(e,t){var n=e.chat,a=void 0===n?"":n,i=e.from,s=void 0===i?null:i;this.emit("chat",{chat:a,from:s,status:t})}},{key:"handleObjectCreate",value:function(e){var t=e.spawnState,n=void 0===t?null:t;this.emit("object-create",{spawnState:n})}},{key:"handleObjectDelete",value:function(e){var t=e.objectID,n=void 0===t?null:t;this.emit("object-delete",{objectID:n})}},{key:"handleObjectUpdate",value:function(e){var t=e.updateState,n=void 0===t?null:t;this.emit("object-update",{updateState:n})}},{key:"handleObjectStats",value:function(e,t){var n=e.message,a=void 0===n?null:n,i=e.stats,s=void 0===i?null:i;this.emit("object-stats",{message:a,stats:s,status:t})}},{key:"handleAbilityList",value:function(e,t){var n=e.message,a=void 0===n?null:n,i=e.abilityList,s=void 0===i?null:i,r=e.abilityPoints,l=void 0===r?0:r;this.emit("ability-list",{message:a,abilityList:s,abilityPoints:l,status:t})}},{key:"handleAbilityUpgrade",value:function(e,t){var n=e.message,a=void 0===n?null:n;this.emit("ability-upgrade",{message:a,status:t})}},{key:"handleAbilityCast",value:function(e,t){var n=e.message,a=void 0===n?null:n;this.emit("ability-cast",{message:a,status:t})}},{key:"handleCreateInstance",value:function(e,t){var n=e.message,a=void 0===n?null:n;this.emit("create-instance",{message:a,status:t})}},{key:"handleMapPlayers",value:function(e,t){e.message;var n=e.players,a=void 0===n?null:n;this.emit("map-players",{players:a,status:t})}},{key:"handleAvailablePlayers",value:function(e,t){e.message;var n=e.players,a=void 0===n?null:n;this.emit("available-players",{players:a,status:t})}},{key:"handleAbilityReady",value:function(e,t){var n=e.abilityName,a=void 0===n?"":n;this.emit("ability-ready",{abilityName:a,status:t})}},{key:"login",value:function(e,t){this.send(b,{username:e,password:t,version:"0.1.0"})}},{key:"logout",value:function(){this.clientID=null,this.send(y)}},{key:"getCharacterList",value:function(){this.send(f)}},{key:"createCharacter",value:function(e,t){this.send(j,{name:e,skin:t})}},{key:"selectCharacter",value:function(e){this.send(k,{name:e})}},{key:"chatMessage",value:function(e){this.send(I,{chat:e})}},{key:"playerUpdate",value:function(e){this.send(x,e)}},{key:"getObjectStats",value:function(e){this.send(L,{objectID:e})}},{key:"getAbilityList",value:function(){this.send(S)}},{key:"upgradeAbility",value:function(e){this.send(M,{abilityName:e})}},{key:"castAbility",value:function(e,t){this.send(Q,{abilityName:e,objectID:t})}},{key:"createInstance",value:function(e,t){this.send(w,{instanceName:e,objectIDs:t})}},{key:"getMapPlayers",value:function(){this.send(D)}},{key:"getAvailablePlayers",value:function(){this.send(Y)}},{key:"send",value:function(e,t){this.sendString(JSON.stringify({opCode:e,data:t}))}},{key:"sendString",value:function(e){this.isConnected&&this.socket.send(e+"?&?")}},{key:"isConnected",get:function(){return this.socket&&1===this.socket.readyState}}]),t}(p.EventEmitter)),J=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return i.a.createElement("footer",{className:"text-center"},i.a.createElement("hr",null),"David Rosenblum, 2019 | v","0.1.0")}}]),t}(i.a.Component),T=new(function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"modal",value:function(e,t,n){this.emit("modal",{header:e,body:t,footer:n})}},{key:"instanceModal",value:function(){this.emit("instance-modal")}},{key:"upgradesModal",value:function(){this.emit("upgrades-modal")}}]),t}(p.EventEmitter)),F=new(function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"showMenu",value:function(e){this.emit("menu",{menu:e})}},{key:"showLogin",value:function(){this.showMenu("login")}},{key:"showRegister",value:function(){this.showMenu("register")}},{key:"showCharacterSelect",value:function(){this.showMenu("character-select")}},{key:"showCharacterCreate",value:function(){this.showMenu("character-create")}},{key:"showGame",value:function(){this.showMenu("game")}}]),t}(p.EventEmitter)),B=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).usernameInput=null,n.passwordInput=null,n.usernameToSave=null,n.state={pending:!1},n.onConnect=function(){n.setState({pending:!1})},n.onLogin=function(e){"ok"===e.status?(n.saveUsername(n.usernameToSave),F.showCharacterSelect()):(T.modal("Login Error",e.message),n.setState({pending:!1}))},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){P.on("connect",this.onConnect),P.on("login",this.onLogin),this.usernameInput.value=this.getSavedUsername()||"",P.isConnected||(this.setState({pending:!0}),P.connect())}},{key:"componentWillUnmount",value:function(){P.removeListener("connect",this.onConnect),P.removeListener("login",this.onLogin)}},{key:"onCreate",value:function(){F.showRegister()}},{key:"onSubmit",value:function(e){e.preventDefault();var t=this.usernameInput.value,n=this.passwordInput.value;this.usernameToSave=t,P.login(t,n)}},{key:"saveUsername",value:function(e){window.localStorage.setItem("username",e)}},{key:"getSavedUsername",value:function(){return window.localStorage.getItem("username")||null}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("br",null),i.a.createElement(v,null),i.a.createElement("br",null),i.a.createElement("div",{className:"app-menu"},i.a.createElement(A.a,{onSubmit:this.onSubmit.bind(this)},i.a.createElement(d.a,null,i.a.createElement(m.a,null,"Username"),i.a.createElement(g.a,{innerRef:function(t){return e.usernameInput=t},type:"text",maxLength:20,disabled:this.state.pending,required:!0})),i.a.createElement(d.a,null,i.a.createElement(m.a,null,"Password"),i.a.createElement(g.a,{innerRef:function(t){return e.passwordInput=t},type:"password",maxLength:20,disabled:this.state.pending,required:!0})),i.a.createElement("div",{className:"text-center"},i.a.createElement(E.a,{width:125,disabled:this.state.pending},"Submit"),"\xa0",i.a.createElement(E.a,{type:"button",width:125,disabled:this.state.pending,onClick:this.onCreate.bind(this)},"Create"))),i.a.createElement(J,null)))}}]),t}(i.a.Component),q=function(){function e(){Object(l.a)(this,e)}return Object(o.a)(e,null,[{key:"request",value:function(t){return new Promise(function(n,a){var i=t.url,s=t.method,r=void 0===s?"GET":s,l=t.headers,o=void 0===l?null:l,c=t.query,u=void 0===c?null:c,h=t.data,A=void 0===h?null:h,d=new XMLHttpRequest;if(d.addEventListener("load",function(){return n(d)}),d.addEventListener("error",function(e){return a(e)}),u&&(i+=e.queryString(u)),d.open(r,i,!0),o)for(var m in o)d.setRequestHeader(m,o[m]);d.send(A)})}},{key:"get",value:function(t,n,a,i){return e.request({url:t,headers:n,query:a,data:i,method:"GET"})}},{key:"post",value:function(t,n,a,i){return e.request({url:t,headers:n,query:a,data:i,method:"POST"})}},{key:"queryString",value:function(e){var t=[];for(var n in e)t.push("".concat(n,"=").concat(e[n]));return"?"+t.join("&")}},{key:"getCorsHeaders",value:function(){return{"Access-Control-Allow-Origin":arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*","Access-Control-Allow-Headers":"Access-Control-Allow-Origin"}}}]),e}(),K=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).usernameInput=null,n.passwordInput=null,n.confirmInput=null,n.state={pending:!1},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"clearForm",value:function(){this.usernameInput.value="",this.passwordInput.value="",this.confirmInput.value=""}},{key:"onCancel",value:function(){F.showLogin()}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({pending:!0});var n=this.usernameInput.value,a=this.passwordInput.value;if(a!==this.confirmInput.value)return T.modal("Passwords Error","Passwords do not match."),void this.setState({pending:!1});var i="".concat(window.location.origin.replace(":3000",":8080"),"/accounts/create"),s=q.getCorsHeaders(),r=JSON.stringify({username:n,password:a});q.post(i,s,null,r).then(function(e){var n=200===e.status?"Account Created":"Account Error";T.modal(n,e.response),200===e.status&&t.clearForm()}).catch(function(){T.modal("Request Error","HTTP request failed.")}).then(function(){t.setState({pending:!1})})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("br",null),i.a.createElement(v,null),i.a.createElement("br",null),i.a.createElement("div",{className:"app-menu"},i.a.createElement(A.a,{onSubmit:this.onSubmit.bind(this)},i.a.createElement(d.a,null,i.a.createElement(m.a,null,"Username"),i.a.createElement(g.a,{innerRef:function(t){return e.usernameInput=t},type:"text",maxLength:20,disabled:this.state.pending,required:!0})),i.a.createElement(d.a,null,i.a.createElement(m.a,null,"Password"),i.a.createElement(g.a,{innerRef:function(t){return e.passwordInput=t},type:"password",maxLength:20,disabled:this.state.pending,required:!0})),i.a.createElement(d.a,null,i.a.createElement(m.a,null,"Confirm Password"),i.a.createElement(g.a,{innerRef:function(t){return e.confirmInput=t},type:"password",maxLength:20,disabled:this.state.pending,required:!0})),i.a.createElement("div",{className:"text-center"},i.a.createElement(E.a,{width:125,disabled:this.state.pending},"Submit"),"\xa0",i.a.createElement(E.a,{width:125,type:"button",onClick:this.onCancel.bind(this),disabled:this.state.pending},"Cancel"))),i.a.createElement(J,null)))}}]),t}(i.a.Component),W=n(86),H=n(29),V=n.n(H),Z=n(47),X=n(21),_=n(12),$=n(19),ee=n.n($),te=n(24),ne=n.n(te),ae=function(e){function t(e,n,a,i,s,r,o){var h;return Object(l.a)(this,t),h=Object(c.a)(this,Object(u.a)(t).call(this,_.AssetUtils.getImageURLByAlias(e),n,a,0,0,s,r)),i&&h.setNametag(i),o&&h.playAnimation(o),h}return Object(h.a)(t,e),t}(_.MPGameEntity),ie=function(e){var t=e.type,n=e.name,a=e.anim,i=e.objectID,s=e.team;switch(t){case"blacksmith":return new ae("blacksmith",100,100,n,i,s,a);case"paragon":return new ae("paragon",100,100,n,i,s,a);case"templar":return new ae("templar",100,100,n,i,s,a);case"player":return new ae("player",100,100,n,i,s,a);default:return null}};_.AssetUtils.setImageAliasMany({blacksmith:ee.a,paragon:ee.a,templar:ee.a,player:ne.a});var se=n(48),re=n.n(se),le={Grass:function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).call(this,_.AssetUtils.getImageURLByAlias("grass"),Ae,Ae))}return Object(h.a)(t,e),t}(_.Sprite)};_.AssetUtils.setImageAliasMany({grass:re.a});var oe=n(25),ce=n.n(oe),ue=function(e){function t(e,n,a,i,s){var r;return Object(l.a)(this,t),(r=Object(c.a)(this,Object(u.a)(t).call(this,_.AssetUtils.getImageURLByAlias(e),n,a))).nodeID=i,r.setNametag(s),r.moveSpeed=0,r}return Object(h.a)(t,e),t}(_.GameEntity),he=function(e){var t=e.type,n=e.nodeID,a=e.text;switch(t){case"airship":return new ue("airship",100,100,n,a,n,a);default:return null}};_.AssetUtils.setImageAliasMany({airship:ce.a});var Ae=64;_.TextField.defaultFont="15px electrolize";var de=new(function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).renderer=new _.Renderer(1280,720),e.layers=new _.MapLayers,e.objects=new _.MPEntityStorage,e.keys=null,e.collisionGrid=null,e.mapBounds=null,e.scroller=null,e.player=null,e.selectedTarget=null,e.renderer.on("render",e.onGameFrame.bind(Object(X.a)(Object(X.a)(e)))),e.renderer.on("click",function(t){return e.layers.processClick(t)}),e.started=!1,e.todo=[],e}return Object(h.a)(t,e),Object(o.a)(t,[{key:"loadAssets",value:function(){return _.AssetUtils.loadAliases()}},{key:"loadMap",value:function(){var e=Object(Z.a)(V.a.mark(function e(t){var n,a,i,s,r,l,o=this;return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.unloadMap(),t.name,n=t.mapData,a=t.transportNodes,i=t.units,e.next=4,this.loadAssets();case 4:s=e.sent,(r=s.images.errors+s.sounds.errors)&&T.modal("Assets Error","Error: ".concat(r," assets failed to load. The game will run, but some things might be missing.")),l=this.layers.buildMap({tileSize:Ae,background:{tileLayout:n.background,tileTypes:[null,le.Grass]},midground:{tileLayout:n.midground,tileTypes:[null]},foreground:{tileLayout:n.foreground,tileTypes:[null]}}),this.keys=new _.KeyboardWatcher,this.keys.onKey("+",function(){return o.layers.toggleMapGrid()}),this.collisionGrid=l.collisionGrid,this.mapBounds=l.mapBounds,this.scroller=new _.Scroller(this.renderer,this.mapBounds),a.forEach(function(e){return o.createTransportNode(e)}),i.forEach(function(e){return o.createObject(e)}),this.renderer.startRendering(this.layers.mapSprite),this.started=!0,this.todo.forEach(function(e){return e()}),this.todo=[];case 19:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"unloadMap",value:function(){this.started=!1,this.renderer.stopRendering(),this.layers.removeAll(),this.objects.clear(),this.keys=null,this.collisionGrid=null,this.mapBounds=null,this.scroller=null,this.player=null}},{key:"createObject",value:function(e){var t=this;if(this.started){var n=e.x,a=e.y,i=e.spawnLocation,s=ie(e);if(s&&this.objects.addObject(s)){if(i){var r=i.col,l=i.row;this.layers.addAt(s,r,l)}else this.layers.add(s),s.setPosition(n,a);s.on("click",function(){return t.selectTarget(s)}),"player"===e.type&&e.ownerID===P.clientID&&(this.player=s,s.on("move",function(){return P.playerUpdate(s.getData())}),P.getObjectStats(s.objectID),P.getAbilityList())}}else this.todo.push(function(){return t.createObject(e)})}},{key:"removeObject",value:function(e){var n=this;if(this.started){var a=this.objects.getObject(e);a&&(a.remove(),this.objects.removeObject(a),t.selectedTarget&&t.selectedTarget.objectID===e&&t.unselectTarget())}else this.todo.push(function(){return n.removeObject(e)})}},{key:"updateObject",value:function(e){var t=this;this.started?this.objects.updateObject(e):this.todo.push(function(){return t.updateObject(e)})}},{key:"createTransportNode",value:function(e){var t=e.spawnLocation,n=t.col,a=t.row,i=he(e);i&&this.layers.addAt(i,n,a)}},{key:"injectInto",value:function(e){this.renderer.injectInto(e)}},{key:"selectTarget",value:function(e){this.unselectTarget(),this.selectedTarget=e,P.getObjectStats(e.objectID)}},{key:"unselectTarget",value:function(){this.selectedTarget&&(this.selectedTarget=null)}},{key:"castAbility",value:function(e){this.selectedTarget&&P.castAbility(e,this.selectedTarget.objectID)}},{key:"onGameFrame",value:function(){this.player&&this.keys.numKeys>0&&(this.keys.isKeyDown("w")?this.player.moveUp(this.collisionGrid,this.mapBounds,this.scroller):this.keys.isKeyDown("s")&&this.player.moveDown(this.collisionGrid,this.mapBounds,this.scroller),this.keys.isKeyDown("a")?this.player.moveLeft(this.collisionGrid,this.mapBounds,this.scroller):this.keys.isKeyDown("d")&&this.player.moveRight(this.collisionGrid,this.mapBounds,this.scroller),this.layers.depthSort())}}]),t}(p.EventEmitter)),me=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={pending:!1,characterList:null,errMessage:null},n.onCharacterList=function(e){"ok"===e.status?n.setState({characterList:e.characterList||null}):(T.modal("Characters Error",e.message),n.setState({errMessage:e.message}))},n.onEnterMap=function(e){"ok"===e.status?(F.showGame(),de.loadMap(e.mapState)):(T.modal("Characters Error",e.message),n.setState({pending:!1}))},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){P.on("character-list",this.onCharacterList),P.on("enter-map",this.onEnterMap),P.on("enter-instance",this.onEnterMap),P.getCharacterList()}},{key:"componentWillUnmount",value:function(){P.removeListener("character-list",this.onCharacterList),P.removeListener("enter-map",this.onEnterMap),P.removeListener("enter-instance",this.onEnterMap)}},{key:"onCreate",value:function(){F.showCharacterCreate()}},{key:"onLogout",value:function(){P.logout(),F.showLogin()}},{key:"selectPlayer",value:function(e){this.setState({pending:!0}),P.selectCharacter(e)}},{key:"renderCharacterList",value:function(){var e=this,t=this.state.characterList;if(!t)return i.a.createElement("div",null,this.state.characterListErrMsg||"Loading...");for(var n=[],a=0;a<6;a++){var s=t[a]||null;s?function(){var t=s.name,r=s.level,l=s.last_map;n.push(i.a.createElement("tr",{key:a},i.a.createElement("td",null,t),i.a.createElement("td",null,"Level ",r),i.a.createElement("td",null,l),i.a.createElement("td",null,i.a.createElement(E.a,{width:125,onClick:function(){return e.selectPlayer(t)},disabled:e.state.pending},"Select"))))}():n.push(i.a.createElement("tr",{key:a},i.a.createElement("td",null,i.a.createElement(E.a,{width:125,onClick:this.onCreate.bind(this),disabled:this.state.pending},"Create"))))}return i.a.createElement("div",null,i.a.createElement(W.a,null,i.a.createElement("thead",null,n)),this.renderLogoutBtn())}},{key:"renderLogoutBtn",value:function(){return i.a.createElement("div",{className:"text-center"},i.a.createElement(E.a,{width:125,disabled:this.state.pending,onClick:this.onLogout.bind(this)},"Logout"))}},{key:"renderBody",value:function(){var e=this.state,t=e.characterList,n=void 0===t?null:t,a=e.errMessage,s=void 0===a?null:a;return s?i.a.createElement("div",null,i.a.createElement("div",null,s),this.renderLogoutBtn()):n?this.renderCharacterList():i.a.createElement("div",null,"Loading...")}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"app-menu"},i.a.createElement("br",null),this.renderBody()))}}]),t}(i.a.Component),ge=n(87),Ee=n(88),ve=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).nameInput=null,n.skinInput=null,n.state={pending:!1},n.onCharacterCreate=function(e){"ok"===e.status?F.showMenu("character-select"):(T.modal("Character Error",e.message),n.setState({pending:!1}))},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){P.on("character-create",this.onCharacterCreate)}},{key:"componentWillUnmount",value:function(){P.removeListener("character-create",this.onCharacterCreate)}},{key:"onCancel",value:function(){F.showMenu("character-select")}},{key:"onSubmit",value:function(e){e.preventDefault(),this.setState({pending:!0});var t=this.nameInput.value,n=this.skinInput.value;P.createCharacter(t,n)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("br",null),i.a.createElement("div",{className:"app-menu"},i.a.createElement(A.a,{onSubmit:this.onSubmit.bind(this)},i.a.createElement(d.a,null,i.a.createElement(m.a,null,"Name"),i.a.createElement(g.a,{innerRef:function(t){return e.nameInput=t},type:"text",maxLength:15,disabled:this.state.pending,required:!0})),i.a.createElement(d.a,null,i.a.createElement(m.a,null,"Skin"),i.a.createElement(ge.a,null,i.a.createElement(Ee.a,{lg:6},i.a.createElement(g.a,{innerRef:function(t){return e.skinInput=t},type:"select",disabled:this.state.pending,required:!0},i.a.createElement("option",{value:1},"Human Male"),i.a.createElement("option",{value:2},"Human Female"))),i.a.createElement(Ee.a,{lg:6},"(Preview)"))),i.a.createElement("div",{className:"text-center"},i.a.createElement(E.a,null,"Submit"),"\xa0",i.a.createElement(E.a,{type:"button",width:125,onClick:this.onCancel.bind(this)},"Cancel")))))}}]),t}(i.a.Component),pe=(n(70),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).displayRef=i.a.createRef(),n.inputRef=i.a.createRef(),n.onChatReceived=function(e){if("ok"===e.status){var t=n.displayRef.current,a=e.from?"".concat(e.from,": ").concat(e.chat):e.chat;t.value?t.value+="\n"+a:t.value=a}},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){P.on("chat",this.onChatReceived)}},{key:"componentWillUnmount",value:function(){P.removeListener("chat",this.onChatReceived)}},{key:"onChatSend",value:function(e){if(13===e.keyCode){var t=this.inputRef.current.value;t&&(P.chatMessage(t),this.inputRef.current.value="")}}},{key:"render",value:function(){return i.a.createElement("div",{className:"hud-chat"},i.a.createElement("textarea",{ref:this.displayRef,readOnly:!0}),i.a.createElement("br",null),i.a.createElement("input",{ref:this.inputRef,type:"text",maxLength:128,onKeyUp:this.onChatSend.bind(this)}))}}]),t}(i.a.Component)),be=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={stats:null},n.onObjectStats=function(e){if("ok"===e.status&&de.selectedTarget){var t=e.stats;de.selectedTarget.objectID===t.objectID&&n.setState({stats:t})}},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){P.on("object-stats",this.onObjectStats)}},{key:"componentWillUnmount",value:function(){P.removeListener("object-stats",this.onObjectStats)}},{key:"renderStats",value:function(){var e=this.state.stats;if(!e)return null;var t=e.base,n=e.current,a=e.name,s=e.team,r=e.level,l=void 0===r?null:r;return i.a.createElement("table",null,i.a.createElement("tbody",null,i.a.createElement("tr",{className:"text-center"},i.a.createElement("td",{colSpan:2},a," ",l?"(".concat(l,")"):null)),i.a.createElement("tr",{className:"text-center"},i.a.createElement("td",{colSpan:2},"<",s,">")),i.a.createElement("tr",null,i.a.createElement("td",null,"HP"),i.a.createElement("td",null,n.health.toFixed(0)," / ",t.health.toFixed(0))),i.a.createElement("tr",null,i.a.createElement("td",null,"MP"),i.a.createElement("td",null,n.mana.toFixed(0)," / ",t.mana.toFixed(0))),i.a.createElement("tr",null,i.a.createElement("td",null,"DEF"),i.a.createElement("td",null,(100*t.defense).toFixed(0),"%")),i.a.createElement("tr",null,i.a.createElement("td",null,"RES"),i.a.createElement("td",null,(100*t.resistance).toFixed(0),"%"))))}},{key:"render",value:function(){return this.state.stats?i.a.createElement("div",{className:"hud-target"},this.renderStats()):null}}]),t}(i.a.Component),ye=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={stats:null},n.onObjectStats=function(e){if("ok"===e.status&&de.player){var t=e.stats;de.player.objectID===t.objectID&&n.setState({stats:t})}},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){P.on("object-stats",this.onObjectStats)}},{key:"componentWillUnmount",value:function(){P.removeListener("object-stats",this.onObjectStats)}},{key:"renderStats",value:function(){var e=this.state.stats;if(!e)return null;var t=e.base,n=e.current,a=e.level,s=e.xp,r=e.xpNeeded,l=e.name;return i.a.createElement("table",null,i.a.createElement("tbody",null,i.a.createElement("tr",{className:"text-center"},i.a.createElement("td",{colSpan:2},l," - Level ",a)),i.a.createElement("tr",null,i.a.createElement("td",null,"HP"),i.a.createElement("td",null,n.health.toFixed(0)," / ",t.health.toFixed(0))),i.a.createElement("tr",null,i.a.createElement("td",null,"MP"),i.a.createElement("td",null,n.mana.toFixed(0)," / ",t.mana.toFixed(0))),i.a.createElement("tr",null,i.a.createElement("td",null,"XP"),i.a.createElement("td",null,s.toFixed(0)," / ",r.toFixed(0)))))}},{key:"render",value:function(){return this.state.stats?i.a.createElement("div",{className:"hud-player"},this.renderStats()):null}}]),t}(i.a.Component),fe=ne.a,je=ce.a,ke={},ze=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={abilityList:null,abilityPoints:0,disabledList:{}},n.onAbilityList=function(e){"ok"===e.status&&n.setState({abilityList:e.abilityList})},n.onAbilityCast=function(e){"bad"===e.status&&n.removeFromDisabledList(e.abilityName)},n.onAbilityReady=function(e){return n.removeFromDisabledList(e.abilityName)},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){P.on("ability-list",this.onAbilityList),P.on("ability-ready",this.onAbilityList)}},{key:"componentWillUnmount",value:function(){P.removeListener("ability-list",this.onAbilityList),P.removeListener("ability-ready",this.onAbilityList)}},{key:"removeFromDisabledList",value:function(e){var t=this.state.disabledList||{};delete t[e],this.setState({disabledList:t})}},{key:"requestCast",value:function(e){var t=this.state.disabledList||{};t[e]=!0,this.setState({disabledList:t}),de.castAbility(e)}},{key:"renderAbilityList",value:function(){var e=this,t=this.state.abilityList||[];t=t.sort(function(e,t){return e.name>t.name?1:-1});for(var n=new Array(10),a=0;a<n.length;a++){var s=t[a]||null;s&&s.level>0?function(){var t=s.abilityName,r=s.level,l=s.name;n[a]=i.a.createElement("img",{key:a,src:ke[t]||fe,width:64,height:64,disabled:t in e.state.disabledList,title:"".concat(l," (Level ").concat(r,")"),onClick:function(){return e.requestCast(t)}})}():n[a]=i.a.createElement("img",{key:a,src:je,width:64,height:64,disabled:!0,title:"(".concat(s?s.name:"Ability"," is not unlocked yet)")})}return i.a.createElement("div",null,n.slice(0,5),i.a.createElement("br",null),n.slice(5,10))}},{key:"render",value:function(){return i.a.createElement("div",{className:"hud-abilities"},this.renderAbilityList())}}]),t}(i.a.Component),Ce=n(89),Ie=n(90),Oe=n(91),Ne=n(92),xe=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={isOpen:!1},n.onMapPlayers=function(e){"ok"===e.status&&T.modal("Nearby Players",Object.keys(e.players).map(function(t){return"".concat(t," (Level ").concat(e.players[t],")")}).join(", "))},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){P.on("map-players",this.onMapPlayers)}},{key:"componentWillUnmount",value:function(){P.removeListener("map-players",this.onMapPlayers)}},{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"onFindPlayers",value:function(){P.getMapPlayers()}},{key:"onExit",value:function(){de.unloadMap(),F.showLogin(),P.logout()}},{key:"renderAdminItems",value:function(){return P.accessLevel>1?[i.a.createElement(Ce.a,{key:0,divider:!0}),i.a.createElement(Ce.a,{key:1,header:!0},"Admin Commands"),i.a.createElement(Ce.a,{key:2,onClick:function(){return T.upgradesModal()}},"Upgrades Menu"),i.a.createElement(Ce.a,{key:3,onClick:function(){return T.instanceModal()}},"Instances Menu")]:null}},{key:"render",value:function(){return i.a.createElement("div",{className:"hud-dropdown"},i.a.createElement(Ie.a,{isOpen:this.state.isOpen,toggle:this.toggle.bind(this)},i.a.createElement(Oe.a,{caret:!0},"Menu"),i.a.createElement(Ne.a,null,i.a.createElement(Ce.a,{header:!0},"Current Map"),i.a.createElement(Ce.a,{onClick:this.onFindPlayers.bind(this)},"Find Players"),i.a.createElement(Ce.a,{divider:!0}),i.a.createElement(Ce.a,{header:!0},"Quit"),i.a.createElement(Ce.a,{onClick:this.onExit.bind(this)},"Exit/Logout"),this.renderAdminItems())))}}]),t}(i.a.Component),Le=n(96),Se=n(93),Me=n(94),Qe=n(95),we=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).instanceNameInput=null,n.playersToInvite={},n.state={isOpen:!1,pending:!1,players:null},n.onAvailablePlayers=function(e){"ok"===e.status?n.setState({players:e.players}):(T.modal("Available Players Error",e.message),n.setState({isOpen:!1}))},n.onInstanceCreate=function(e){"ok"===e.status?n.setState({isOpen:!1}):(n.setState({pending:!1}),T.modal("Instance Error",e.message))},n.onInstanceModal=function(){n.setState({isOpen:!0,players:null,pending:!1}),P.getAvailablePlayers()},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){T.on("instance-modal",this.onInstanceModal),P.on("available-players",this.onAvailablePlayers),P.on("create-instance",this.onInstanceCreate)}},{key:"componentWillUnmount",value:function(){T.removeListener("instance-modal",this.onInstanceModal),P.removeListener("available-players",this.onAvailablePlayers),P.removeListener("create-instance",this.onInstanceCreate)}},{key:"toggle",value:function(){this.state.pending||this.setState({isOpen:!this.state.isOpen})}},{key:"toggleInvite",value:function(e){e in this.playersToInvite?delete this.playersToInvite[e]:this.playersToInvite[e]=!0}},{key:"onSubmit",value:function(e){e.preventDefault(),this.setState({pending:!0});var t=this.instanceNameInput.value,n=Object.keys(this.playersToInvite);P.createInstance(t,n),this.playersToInvite={}}},{key:"renderPlayers",value:function(){var e=this,t=this.state.players;if(!t)return i.a.createElement("div",null,"Loading...");if(!t.length)return i.a.createElement("div",null,"No other available players to invite.");var n=[],a=!0,s=!1,r=void 0;try{for(var l,o=function(){var t=l.value,a=t.level,s=t.name,r=t.objectID;n.push(i.a.createElement("tr",{key:s},i.a.createElement("td",null,i.a.createElement(g.a,{type:"checkbox",onChange:function(){return e.toggleInvite(r)},disabled:e.state.pending})," Invite?"),i.a.createElement("td",null,s),i.a.createElement("td",null,"Level ",a)))},c=t[Symbol.iterator]();!(a=(l=c.next()).done);a=!0)o()}catch(u){s=!0,r=u}finally{try{a||null==c.return||c.return()}finally{if(s)throw r}}return i.a.createElement("div",{className:"text-center"},i.a.createElement(W.a,null,i.a.createElement("tbody",null,n)))}},{key:"render",value:function(){var e=this;return i.a.createElement(Le.a,{isOpen:this.state.isOpen,toggle:this.toggle.bind(this)},i.a.createElement(Se.a,{toggle:this.toggle.bind(this)},"Start Raid Instance"),i.a.createElement(Me.a,null,i.a.createElement(A.a,{onSubmit:this.onSubmit.bind(this)},i.a.createElement(d.a,null,i.a.createElement(m.a,null,"Select Instance"),i.a.createElement(g.a,{innerRef:function(t){return e.instanceNameInput=t},type:"select",disabled:this.state.pending,required:!0},i.a.createElement("option",null,"Graveyard"),i.a.createElement("option",null,"Crypt"))),i.a.createElement(d.a,null,i.a.createElement(m.a,null,"Invite Players"),this.renderPlayers()),i.a.createElement("div",null,i.a.createElement(E.a,{disabled:this.state.pending},"Create")))),i.a.createElement(Qe.a,null))}}]),t}(i.a.Component),De=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={isOpen:!1,abilityList:null,pending:!1},n.onAbilityList=function(e){if("ok"===e.status){var t=e.abilityList,a=e.abilityPoints;n.setState({abilityList:t,abilityPoints:a})}else n.setState({isOpen:!1}),T.modal("Ability List Error",e.message)},n.onAbilityUpgrade=function(e){"ok"===e.status?(n.setState({isOpen:!1}),P.getAbilityList()):(n.setState({pending:!1}),T.modal("Upgrade Error",e.message))},n.onUpgradesModal=function(){n.setState({isOpen:!0,abilityList:null,abilityPoints:0,pending:!1}),P.getAbilityList()},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){T.on("upgrades-modal",this.onUpgradesModal),P.on("ability-list",this.onAbilityList),P.on("ability-upgrade",this.onAbilityUpgrade)}},{key:"componentWillUnmount",value:function(){T.removeListener("upgrades-modal",this.onUpgradesModal),P.removeListener("ability-list",this.onAbilityList),P.removeListener("ability-upgrade",this.onAbilityUpgrade)}},{key:"toggle",value:function(){this.state.pending||this.setState({isOpen:!this.state.isOpen})}},{key:"submitUpgrade",value:function(e){this.setState({pending:!0}),P.upgradeAbility(e)}},{key:"renderUpgradesTable",value:function(){var e=this,t=this.state,n=t.abilityList,a=t.abilityPoints;if(!n)return i.a.createElement("div",null,"Loading...");if(!a)return i.a.createElement("div",null,"You have no ability points.");if(!n.length)return i.a.createElement("div",null,"No abilities available.");n=n.sort(function(e,t){return e.name>t.name?1:-1});for(var s=[],r=function(t){var a=n[t],r=a.abilityName,l=a.name,o=a.level;s.push(i.a.createElement("tr",{key:t},i.a.createElement("td",null,l),i.a.createElement("td",null,"Level ",o," to ",o+1),i.a.createElement("td",null,i.a.createElement(E.a,{width:125,onClick:function(){return e.submitUpgrade(r)},disabled:e.state.pending},o>0?"Upgrade":"Unlock"))))},l=0;l<n.length;l++)r(l);return i.a.createElement("div",{className:"text-center"},i.a.createElement(W.a,null,i.a.createElement("tbody",null,s)))}},{key:"render",value:function(){return i.a.createElement(Le.a,{isOpen:this.state.isOpen,toggle:this.toggle.bind(this)},i.a.createElement(Se.a,{toggle:this.toggle.bind(this)},"Ability Upgrades"),i.a.createElement(Me.a,null,this.renderUpgradesTable()),i.a.createElement(Qe.a,null))}}]),t}(i.a.Component),Ye=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).containerRef=i.a.createRef(),n.onObjectCreate=function(e){return de.createObject(e.spawnState)},n.onObjectDelete=function(e){return de.removeObject(e.objectID)},n.onObjectUpdate=function(e){return de.updateObject(e.updateState)},n.oEnterMap=function(e){return de.loadMap(e.mapState)},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){P.on("object-create",this.onObjectCreate),P.on("object-delete",this.onObjectDelete),P.on("object-update",this.onObjectUpdate),P.on("enter-map",this.oEnterMap),P.on("enter-instance",this.oEnterMap),de.injectInto(this.containerRef.current)}},{key:"componentWillUnmount",value:function(){P.removeListener("object-create",this.onObjectCreate),P.removeListener("object-delete",this.onObjectDelete),P.removeListener("object-update",this.onObjectUpdate),P.removeListener("enter-map",this.oEnterMap),P.removeListener("enter-instance",this.oEnterMap)}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{ref:this.containerRef,className:"canvas-container"}),i.a.createElement(pe,null),i.a.createElement(be,null),i.a.createElement(ye,null),i.a.createElement(ze,null),i.a.createElement(xe,null),i.a.createElement(we,null),i.a.createElement(De,null))}}]),t}(i.a.Component),Ue=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={isOpen:!1,header:null,body:null,footer:null},n.onModal=function(e){n.setState({isOpen:!0,header:e.header||null,body:e.body||null,footer:e.footer||null})},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){T.on("modal",this.onModal)}},{key:"componentWillUnmount",value:function(){T.removeListener("modal",this.onModal)}},{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return i.a.createElement(Le.a,{isOpen:this.state.isOpen,toggle:this.toggle.bind(this)},i.a.createElement(Se.a,{toggle:this.toggle.bind(this)},this.state.header||null),i.a.createElement(Me.a,null,this.state.body||null),i.a.createElement(Qe.a,null,this.state.footer||null))}}]),t}(i.a.Component),Ge=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={menu:"login"},n.onMenu=function(e){return n.setState({menu:e.menu})},n.onClientClose=function(){T.modal("Socket Error","Connection error."),F.showLogin()},n.onClientError=function(e){},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){F.on("menu",this.onMenu),P.on("close",this.onClientClose),P.on("error",this.onClientError)}},{key:"componentWillUnmount",value:function(){F.removeListener("menu",this.onMenu),P.removeListener("close",this.onClientClose),P.removeListener("error",this.onClientError)}},{key:"renderMenu",value:function(){switch(this.state.menu){case"login":return i.a.createElement(B,null);case"register":return i.a.createElement(K,null);case"character-select":return i.a.createElement(me,null);case"character-create":return i.a.createElement(ve,null);case"game":return i.a.createElement(Ye,null);default:return null}}},{key:"render",value:function(){return i.a.createElement("div",null,this.renderMenu(),i.a.createElement(Ue,null))}}]),t}(i.a.Component);n(79);r.a.render(i.a.createElement(Ge,null),document.querySelector("#root"))}},[[49,2,1]]]);
//# sourceMappingURL=main.5972bb2b.chunk.js.map